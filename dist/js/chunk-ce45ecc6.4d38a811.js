(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce45ecc6"],{"1dd3":function(e,t,a){"use strict";a("d32f")},2241:function(e,t,a){"use strict";var n,o=a("7a23"),c=a("db17"),r=a("c199"),l=a("1da4"),i=a("d282"),u=a("7e3e"),d=a("8da3"),s=a("b1d2"),b=a("ea8e"),f=a("f827"),m=a("e41f"),p=a("b650"),j=a("d3d4"),O=a("a792"),[v,g,y]=Object(i["a"])("dialog"),h=[...f["a"],"transition","closeOnPopstate"],x=Object(o["defineComponent"])({name:v,props:Object(c["a"])({},f["b"],{title:String,theme:String,width:[Number,String],message:[String,Function],callback:Function,allowHtml:Boolean,className:c["g"],messageAlign:String,closeOnPopstate:c["f"],showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:c["f"],closeOnClickOverlay:Boolean,transition:{type:String,default:"van-dialog-bounce"}}),emits:["confirm","cancel","update:show"],setup(e,{emit:t,slots:a}){var n=Object(o["reactive"])({confirm:!1,cancel:!1}),r=e=>t("update:show",e),l=t=>{r(!1),e.callback&&e.callback(t)},i=a=>()=>{e.show&&(t(a),e.beforeClose?(n[a]=!0,Object(u["a"])({interceptor:e.beforeClose,args:[a],done(){l(a),n[a]=!1},canceled(){n[a]=!1}})):l(a))},f=i("cancel"),v=i("confirm"),x=()=>{var t=a.title?a.title():e.title;if(t)return Object(o["createVNode"])("div",{class:g("header",{isolated:!e.message&&!a.default})},[t])},k=t=>{var{message:a,allowHtml:n,messageAlign:c}=e,r=g("message",{"has-title":t,[c]:c}),l=Object(d["c"])(a)?a():a;return n&&"string"===typeof l?Object(o["createVNode"])("div",{class:r,innerHTML:l},null):Object(o["createVNode"])("div",{class:r},[l])},V=()=>{if(a.default)return Object(o["createVNode"])("div",{class:g("content")},[a.default()]);var{title:t,message:n,allowHtml:c}=e;if(n){var r=!(!t&&!a.title);return Object(o["createVNode"])("div",{key:c?1:0,class:g("content",{isolated:!r})},[k(r)])}},B=()=>Object(o["createVNode"])("div",{class:[s["e"],g("footer")]},[e.showCancelButton&&Object(o["createVNode"])(p["a"],{size:"large",text:e.cancelButtonText||y("cancel"),class:g("cancel"),style:{color:e.cancelButtonColor},loading:n.cancel,onClick:f},null),e.showConfirmButton&&Object(o["createVNode"])(p["a"],{size:"large",text:e.confirmButtonText||y("confirm"),class:[g("confirm"),{[s["c"]]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:n.confirm,onClick:v},null)]),S=()=>Object(o["createVNode"])(j["a"],{class:g("footer")},{default:()=>[e.showCancelButton&&Object(o["createVNode"])(O["a"],{type:"warning",text:e.cancelButtonText||y("cancel"),class:g("cancel"),color:e.cancelButtonColor,loading:n.cancel,onClick:f},null),e.showConfirmButton&&Object(o["createVNode"])(O["a"],{type:"danger",text:e.confirmButtonText||y("confirm"),class:g("confirm"),color:e.confirmButtonColor,loading:n.confirm,onClick:v},null)]}),C=()=>a.footer?a.footer():"round-button"===e.theme?S():B();return()=>{var{width:t,title:a,theme:n,message:l,className:i}=e;return Object(o["createVNode"])(m["a"],Object(o["mergeProps"])({role:"dialog",class:[g([n]),i],style:{width:Object(b["a"])(t)},"aria-labelledby":a||l},Object(c["e"])(e,h),{"onUpdate:show":r}),{default:()=>[x(),V(),C()]})}}});function k(){var e={setup(){var{state:e,toggle:t}=Object(l["b"])();return()=>Object(o["createVNode"])(x,Object(o["mergeProps"])(e,{"onUpdate:show":t}),null)}};({instance:n}=Object(l["a"])(e))}function V(e){return c["c"]?new Promise((t,a)=>{n||k(),n.open(Object(c["a"])({},V.currentOptions,e,{callback:e=>{("confirm"===e?t:a)(e)}}))}):Promise.resolve()}V.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},V.currentOptions=Object(c["a"])({},V.defaultOptions),V.alert=V,V.confirm=e=>V(Object(c["a"])({showCancelButton:!0},e)),V.close=()=>{n&&n.toggle(!1)},V.setDefaultOptions=e=>{Object(c["a"])(V.currentOptions,e)},V.resetDefaultOptions=()=>{V.currentOptions=Object(c["a"])({},V.defaultOptions)},V.Component=Object(r["a"])(x),V.install=e=>{e.use(V.Component),e.config.globalProperties.$dialog=V};t["a"]=V},"2fcb":function(e,t,a){},9342:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return r}));var n=a("b775");function o(e){return Object(n["b"])({url:"/ky/hxxmjt/"+e,method:"get",loadingLoader:"getXmjt"})}function c(e){return Object(n["b"])({url:"/ky/hxxmjt",method:e.id?"put":"post",data:e,loadingLoader:"saveXmjt"})}function r(e){return Object(n["b"])({url:"/ky/jgxx/getPtList",method:"get",params:e})}},"940d":function(e,t,a){"use strict";a.r(t);var n=a("f3f3"),o=a("7a23"),c=Object(o["withScopeId"])("data-v-59b70f36");Object(o["pushScopeId"])("data-v-59b70f36");var r=Object(o["createTextVNode"])("阶段性成果");Object(o["popScopeId"])();var l=c((function(e,t,a,l,i,u){var d=Object(o["resolveComponent"])("van-cell"),s=Object(o["resolveComponent"])("s-uploader"),b=Object(o["resolveComponent"])("van-field"),f=Object(o["resolveComponent"])("van-cell-group"),m=Object(o["resolveComponent"])("van-divider"),p=Object(o["resolveComponent"])("SimpleTable"),j=Object(o["resolveComponent"])("ApprovalCommon");return Object(o["openBlock"])(),Object(o["createBlock"])(j,Object(o["mergeProps"])(l.state,{"type-name":"横向项目结题",applyInfo:Object(n["a"])({},l.state),"before-submit-validate":l.onValidate,chooseParams:l.chooseParams,onSubmit:l.onSubmit,style:{"padding-bottom":"0px"}}),{default:c((function(){return[Object(o["createVNode"])(f,{inset:""},{default:c((function(){return[Object(o["createVNode"])(d,{title:"项目名称"},{default:c((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.state.xmmc),1)]})),_:1}),Object(o["createVNode"])(d,{title:"项目编号（内部）"},{default:c((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.state.xmbh),1)]})),_:1}),Object(o["createVNode"])(d,{title:"负责人"},{default:c((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.state.fzr),1)]})),_:1}),Object(o["createVNode"])(d,{title:"合同类型"},{default:c((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.state.htlx),1)]})),_:1}),Object(o["createVNode"])(d,{title:"结题时间"},{default:c((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.state.jtsj),1)]})),_:1}),Object(o["createVNode"])(d,{title:"研究工作情况"},{default:c((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.state.yjgzqk),1)]})),_:1}),Object(o["createVNode"])(b,{name:"uploader",label:"文件上传"},{input:c((function(){return[Object(o["createVNode"])(s,{modelValue:l.state.fj,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.state.fj=e}),disabled:l.disabled},null,8,["modelValue","disabled"])]})),_:1})]})),_:1}),Object(o["createVNode"])(m,null,{default:c((function(){return[r]})),_:1}),Object(o["createVNode"])(f,{inset:""},{default:c((function(){return[Object(o["createVNode"])(p,{columns:l.columns,"data-source":l.state.jtcgList},null,8,["columns","data-source"])]})),_:1})]})),_:1},16,["applyInfo","before-submit-validate","chooseParams","onSubmit"])})),i=(a("9a83"),a("f564")),u=(a("e17f"),a("2241")),d=a("d0ff"),s=(a("2b28"),a("9ed2")),b=(a("99af"),a("7db0"),a("f602")),f=a("d237"),m=a("135f"),p=a("6c02"),j=a("9342"),O={name:"hxxmjt",components:{ApprovalCommon:m["a"],SUploader:b["a"],SimpleTable:f["a"],vanDivider:s["a"]},setup:function(){var e=Object(o["reactive"])({authority:{canEdit:!0},id:0}),t=Object(o["ref"])(!1),a=Object(o["ref"])(null),c=Object(p["d"])(),r=Object(o["reactive"])({deptId:void 0,deptNo:void 0}),l=Object(o["ref"])([]);Object(j["a"])().then((function(e){var t=e.data,a=t.kyjg,n=t.xkjs,o=t.kytd,c=t.yjzx;l.value=[].concat(Object(d["a"])(a),Object(d["a"])(n),Object(d["a"])(o),Object(d["a"])(c))}));var s=Object(p["c"])(),b=s.query;b.id?Object(j["b"])(b.id).then((function(a){var n,o;Object.assign(e,a.data),t.value=!(null!==(n=e.authority)&&void 0!==n&&n.canEdit),e.jtcgList=e.cgList,r.deptId=m(e.xmxx.ssjgdm),r.deptNo=e.xmxx.ssyxdm,null!==(o=e.authority)&&void 0!==o&&o.canEdit&&(u["a"].alert({message:"需要编辑请访问PC端",confirmButtonText:"好的"}),e.authority.canEdit=null)})):u["a"].alert({message:"需要项目结题请访问PC端",confirmButtonText:"返回"}).then((function(){c.back()}));var f=Object(o["ref"])([{title:"成果名称",dataIndex:"cgmc"},{title:"第一作者",dataIndex:"dyzz"},{title:"获得日期",dataIndex:"hdrq"}]),m=function(e){return e?l.value.find((function(t){return t.jgdm===e})).deptId:void 0},O=function(){var e;return null===(e=a.value)||void 0===e?void 0:e.validate()},v=function(t){var a=Object(n["a"])(Object(n["a"])({},t),e);a.processParam=t.processParam,Object(j["c"])(a,null,"提交中").then((function(e){0===e.code&&(Object(i["a"])({type:"success",message:"提交成功",duration:1e3}),c.back())}))};return{state:e,formRef:a,disabled:t,chooseParams:r,onSubmit:v,onValidate:O,columns:f}}};O.render=l,O.__scopeId="data-v-59b70f36";t["default"]=O},"9bd2":function(e,t,a){},c959:function(e,t,a){"use strict";a("9bd2")},d237:function(e,t,a){"use strict";var n=a("fc11"),o=a("7a23"),c=Object(o["withScopeId"])("data-v-61b6ca12");Object(o["pushScopeId"])("data-v-61b6ca12");var r={key:0,class:"simple-table-empty"};Object(o["popScopeId"])();var l=c((function(e,t,a,c,l,i){return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("table",Object(o["mergeProps"])({border:"0.5",cellspacing:"0",bordercolor:"",class:"simple-table-container"},e.$attrs),[Object(o["createVNode"])("tr",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.columns,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("th",{key:e[a.columnsValue],class:"van-hairline--surround"},Object(o["toDisplayString"])(e.title),1)})),128))]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.dataSource,(function(t,c){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t[a.rowKey]||c},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.columns,(function(r){return Object(o["openBlock"])(),Object(o["createBlock"])("td",{class:["van-hairline--surround",Object(n["a"])({},r.className,!!r.className)],key:r[a.columnsValue],style:r.style},["slot"===r.type?Object(o["renderSlot"])(e.$slots,r[a.columnsValue],{key:0,text:t[r[a.columnsValue]],record:t,index:c},void 0,!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t[r[a.columnsValue]]),1)],64))],6)})),128))])})),128))],16),a.dataSource&&a.dataSource.length?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",r," 暂无数据 "))],64)})),i={name:"SimpleTable",props:{rowKey:{type:String,default:"id"},columnsValue:{type:String,default:"dataIndex"},columns:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}}}};a("c959");i.render=l,i.__scopeId="data-v-61b6ca12";t["a"]=i},d32f:function(e,t,a){},e17f:function(e,t,a){"use strict";a("68ef"),a("d4ef"),a("cb51"),a("3743"),a("e3b3"),a("bc1b"),a("1703"),a("a71a"),a("4d75"),a("2fcb")},f602:function(e,t,a){"use strict";a("b0c0");var n=a("7a23"),o=Object(n["withScopeId"])("data-v-d08a5ff4"),c=o((function(e,t,a,c,r,l){var i=Object(n["resolveComponent"])("van-icon"),u=Object(n["resolveComponent"])("Uploader");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{modelValue:c.fileList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.fileList=e}),"before-read":c.beforeRead,"after-read":c.afterRead,"max-size":c.isOverSize,"max-count":a.maxCount,accept:a.accept,"show-upload":!a.disabled,deletable:!a.disabled,name:a.name,onDelete:c.onDelete},{"preview-cover":o((function(e){return[Object(n["createVNode"])("div",{class:"mask-content",onClick:Object(n["withModifiers"])((function(t){return c.fileDownLoad(e)}),["stop"])},[Object(n["createVNode"])(i,{name:"down",class:"icon"})],8,["onClick"])]})),_:1},8,["modelValue","before-read","after-read","max-size","max-count","accept","show-upload","deletable","name","onDelete"])})),r=(a("9a83"),a("f564")),l=a("fc11"),i=(a("480b"),a("a37c")),u=(a("e930"),a("8f80")),d=(a("a9e3"),a("d81d"),a("ac1f"),a("1276"),a("4de4"),a("a15b"),a("2934")),s={name:"SUploader",components:Object(l["a"])({Uploader:u["a"]},i["a"].name,i["a"]),props:{modelValue:String,name:String,disabled:{type:Boolean,required:!1},type:{type:[String,void 0],validator:function(e){return void 0===e||-1!==["link"].indexOf(e)}},accept:{type:String,default:".rar,.zip,.doc,.docx,.pdf,.jpg,.png"},maxSize:{type:Number,default:50},maxCount:{type:Number,default:6}},setup:function(e,t){var a=Object(n["ref"])([]),o="link"===e.type,c=function(e){var t=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;return t.test(e)};Object(n["watch"])((function(){return e.modelValue}),(function(t,n){var r;o?a.value=null===(r=e.modelValue)||void 0===r?void 0:r.split(",").map((function(e){return{id:e,status:"done",url:e}})):!n&&t&&"-2"!==t?Object(d["h"])({ids:t}).then((function(e){0===e.code&&(a.value=e.data.map((function(e){return{id:e.id,name:e.fname,status:"done",url:c(e.furl)?e.furl:e.fname}})))})):t||(a.value=[])}),{immediate:!0}),Object(n["watch"])((function(){return a.value}),(function(e,a){var n=e.filter((function(e){return"uploading"!==e.status})).map((function(e){return e.id}));0===e.length?t.emit("update:modelValue",""):0===n.length?t.emit("update:modelValue","-2"):t.emit("update:modelValue",n.join(","))}),{deep:!0});var l=function(t){var a=t.size/1024/1024<e.maxSize;return a||Object(r["a"])({type:"warning",message:"上传的文件不能超过".concat(e.maxSize,"MB"),duration:1e3}),!a},i=function(e,t){return!0},u=function(e,t){e.status="uploading",e.message="上传中...";var a=new FormData;a.append("ft",""),a.append("file",e.file),(o?d["f"]:d["e"])(a).then((function(t){0===t.code&&(e.status="done",e.message="上传成功",e.id=o?t.msg:t.data)})).catch((function(){e.status="failed",e.message="上传失败"}))},s=function(e,t){},b=function(){};return{fileList:a,onDelete:s,isOverSize:l,beforeRead:i,afterRead:u,fileDownLoad:b}}};a("1dd3");s.render=c,s.__scopeId="data-v-d08a5ff4";t["a"]=s}}]);