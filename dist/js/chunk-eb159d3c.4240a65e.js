(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb159d3c"],{"1dd3":function(e,t,a){"use strict";a("d32f")},"4b3e":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o=Object(n["withScopeId"])("data-v-bad60c2a");Object(n["pushScopeId"])("data-v-bad60c2a");var c=Object(n["createTextVNode"])("阶段性成果");Object(n["popScopeId"])();var d=o((function(e,t,a,d,l,r){var u=Object(n["resolveComponent"])("van-cell"),i=Object(n["resolveComponent"])("s-uploader"),m=Object(n["resolveComponent"])("van-cell-group"),f=Object(n["resolveComponent"])("van-divider"),s=Object(n["resolveComponent"])("ApprovalCommon");return Object(n["openBlock"])(),Object(n["createBlock"])(s,Object(n["mergeProps"])(l.mdl,{chooseParams:l.state,"type-name":"纵向项目中检",onSubmit:r.onSubmit,btnLoading:e.$wait.is(""),applyInfo:l.mdl}),{default:o((function(){return[Object(n["createVNode"])(m,null,{default:o((function(){return[Object(n["createVNode"])(u,{title:"项目名称",value:l.mdl.xmmc},null,8,["value"]),Object(n["createVNode"])(u,{title:"项目编号(内部)",value:l.mdl.xmbh},null,8,["value"]),Object(n["createVNode"])(u,{title:"负责人",value:l.mdl.fzr},null,8,["value"]),Object(n["createVNode"])(u,{title:"项目来源",value:l.mdl.xmly},null,8,["value"]),Object(n["createVNode"])(u,{title:"截止日期",value:l.mdl.jzrq},null,8,["value"]),Object(n["createVNode"])(u,{title:"研究工作情况",value:l.mdl.yjgzqk},null,8,["value"]),Object(n["createVNode"])(u,{title:"附件"},{"right-icon":o((function(){return[Object(n["createVNode"])(i,{modelValue:l.mdl.fj,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.mdl.fj=e}),disabled:!0},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(f,{"content-position":"left"},{default:o((function(){return[c]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(l.mdl.zjcgList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(m,{class:"itemWrap",inset:"",key:e.id},{default:o((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(l.columns,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:t.dataIndex,title:t.title,value:e[t.dataIndex]},null,8,["title","value"])})),128))]})),_:2},1024)})),128))]})),_:1},16,["chooseParams","onSubmit","btnLoading","applyInfo"])})),l=(a("9a83"),a("f564")),r=a("f3f3"),u=(a("2b28"),a("9ed2")),i=a("135f"),m=a("b775");a("989b");function f(e){return Object(m["b"])({url:"/ky/xmzj/"+e,method:"get",loadingLoader:"getXmzj"})}function s(e){return Object(m["b"])({url:"/ky/xmzj",method:e.id?"put":"post",data:e,loadingLoader:"saveXmzj"})}var p=a("f602"),b={name:"zxxmzj",components:{ApprovalCommon:i["a"],SUploader:p["a"],vanDivider:u["a"]},data:function(){return{mdl:{},state:{},columns:[{title:"成果名称",dataIndex:"cgmc"},{title:"成果类型",dataIndex:"cglx"},{title:"第一作者",dataIndex:"dyzz"},{title:"获得日期",dataIndex:"hdrq"}]}},created:function(){var e=this,t=this.$route.query;f(t.id).then((function(t){0===t.code&&(e.mdl=t.data,e.state.deptId=e.mdl.xmxx.deptId,e.state.deptNo=e.mdl.xmxx.ssyxdm)}))},methods:{onSubmit:function(e){var t=this;s(Object(r["a"])(Object(r["a"])({},this.mdl),e)).then((function(e){Object(l["a"])({type:"success",message:"操作成功",duration:1e3}),t.$router.back()}))}}};a("645e");b.render=d,b.__scopeId="data-v-bad60c2a";t["default"]=b},"645e":function(e,t,a){"use strict";a("bb79")},bb79:function(e,t,a){},d32f:function(e,t,a){},f602:function(e,t,a){"use strict";a("b0c0");var n=a("7a23"),o=Object(n["withScopeId"])("data-v-d08a5ff4"),c=o((function(e,t,a,c,d,l){var r=Object(n["resolveComponent"])("van-icon"),u=Object(n["resolveComponent"])("Uploader");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{modelValue:c.fileList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.fileList=e}),"before-read":c.beforeRead,"after-read":c.afterRead,"max-size":c.isOverSize,"max-count":a.maxCount,accept:a.accept,"show-upload":!a.disabled,deletable:!a.disabled,name:a.name,onDelete:c.onDelete},{"preview-cover":o((function(e){return[Object(n["createVNode"])("div",{class:"mask-content",onClick:Object(n["withModifiers"])((function(t){return c.fileDownLoad(e)}),["stop"])},[Object(n["createVNode"])(r,{name:"down",class:"icon"})],8,["onClick"])]})),_:1},8,["modelValue","before-read","after-read","max-size","max-count","accept","show-upload","deletable","name","onDelete"])})),d=(a("9a83"),a("f564")),l=a("fc11"),r=(a("480b"),a("a37c")),u=(a("e930"),a("8f80")),i=(a("a9e3"),a("d81d"),a("ac1f"),a("1276"),a("4de4"),a("a15b"),a("2934")),m={name:"SUploader",components:Object(l["a"])({Uploader:u["a"]},r["a"].name,r["a"]),props:{modelValue:String,name:String,disabled:{type:Boolean,required:!1},type:{type:[String,void 0],validator:function(e){return void 0===e||-1!==["link"].indexOf(e)}},accept:{type:String,default:".rar,.zip,.doc,.docx,.pdf,.jpg,.png"},maxSize:{type:Number,default:50},maxCount:{type:Number,default:6}},setup:function(e,t){var a=Object(n["ref"])([]),o="link"===e.type,c=function(e){var t=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;return t.test(e)};Object(n["watch"])((function(){return e.modelValue}),(function(t,n){var d;o?a.value=null===(d=e.modelValue)||void 0===d?void 0:d.split(",").map((function(e){return{id:e,status:"done",url:e}})):!n&&t&&"-2"!==t?Object(i["h"])({ids:t}).then((function(e){0===e.code&&(a.value=e.data.map((function(e){return{id:e.id,name:e.fname,status:"done",url:c(e.furl)?e.furl:e.fname}})))})):t||(a.value=[])}),{immediate:!0}),Object(n["watch"])((function(){return a.value}),(function(e,a){var n=e.filter((function(e){return"uploading"!==e.status})).map((function(e){return e.id}));0===e.length?t.emit("update:modelValue",""):0===n.length?t.emit("update:modelValue","-2"):t.emit("update:modelValue",n.join(","))}),{deep:!0});var l=function(t){var a=t.size/1024/1024<e.maxSize;return a||Object(d["a"])({type:"warning",message:"上传的文件不能超过".concat(e.maxSize,"MB"),duration:1e3}),!a},r=function(e,t){return!0},u=function(e,t){e.status="uploading",e.message="上传中...";var a=new FormData;a.append("ft",""),a.append("file",e.file),(o?i["f"]:i["e"])(a).then((function(t){0===t.code&&(e.status="done",e.message="上传成功",e.id=o?t.msg:t.data)})).catch((function(){e.status="failed",e.message="上传失败"}))},m=function(e,t){},f=function(){};return{fileList:a,onDelete:m,isOverSize:l,beforeRead:r,afterRead:u,fileDownLoad:f}}};a("1dd3");m.render=c,m.__scopeId="data-v-d08a5ff4";t["a"]=m}}]);