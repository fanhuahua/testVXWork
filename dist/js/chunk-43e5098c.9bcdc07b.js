(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43e5098c"],{"07d3":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o=Object(n["withScopeId"])("data-v-bb96aeca"),d=o((function(e,t,a,d,c,l){var u=Object(n["resolveComponent"])("van-cell"),r=Object(n["resolveComponent"])("s-uploader"),i=Object(n["resolveComponent"])("van-cell-group"),m=Object(n["resolveComponent"])("ApprovalCommon");return Object(n["openBlock"])(),Object(n["createBlock"])(m,Object(n["mergeProps"])(c.mdl,{chooseParams:c.state,"type-name":"纵向项目延期",onSubmit:l.onSubmit,btnLoading:e.$wait.is(""),applyInfo:c.mdl}),{default:o((function(){return[Object(n["createVNode"])(i,null,{default:o((function(){return[Object(n["createVNode"])(u,{title:"项目名称",value:c.mdl.xmmc},null,8,["value"]),Object(n["createVNode"])(u,{title:"项目编号(内部)",value:c.mdl.xmbh},null,8,["value"]),Object(n["createVNode"])(u,{title:"负责人",value:c.mdl.fzr},null,8,["value"]),Object(n["createVNode"])(u,{title:"项目来源",value:c.mdl.xmly},null,8,["value"]),Object(n["createVNode"])(u,{title:"项目延期至",value:c.mdl.xmyqrq},null,8,["value"]),Object(n["createVNode"])(u,{title:"延期原因说明",value:c.mdl.yjyysm},null,8,["value"]),Object(n["createVNode"])(u,{title:"附件"},{"right-icon":o((function(){return[Object(n["createVNode"])(r,{modelValue:c.mdl.fj,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.mdl.fj=e}),disabled:!0},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},16,["chooseParams","onSubmit","btnLoading","applyInfo"])})),c=(a("9a83"),a("f564")),l=a("f3f3"),u=(a("2b28"),a("9ed2")),r=a("135f"),i=a("b775");a("989b");function m(e){return Object(i["b"])({url:"/ky/xmyq/"+e,method:"get",loadingLoader:"getXmyq"})}function f(e){return Object(i["b"])({url:"/ky/xmyq",method:e.id?"put":"post",data:e,loadingLoader:"saveXmyq"})}var s=a("f602"),p={name:"zxxmyq",components:{ApprovalCommon:r["a"],SUploader:s["a"],vanDivider:u["a"]},data:function(){return{mdl:{},state:{}}},created:function(){var e=this,t=this.$route.query;m(t.id).then((function(t){0===t.code&&(e.mdl=t.data,e.state.deptId=e.mdl.xmxx.deptId,e.state.deptNo=e.mdl.xmxx.ssyxdm)}))},methods:{onSubmit:function(e){var t=this;f(Object(l["a"])(Object(l["a"])({},this.mdl),e)).then((function(e){Object(c["a"])({type:"success",message:"操作成功",duration:1e3}),t.$router.back()}))}}};a("d4cc");p.render=d,p.__scopeId="data-v-bb96aeca";t["default"]=p},"1dd3":function(e,t,a){"use strict";a("d32f")},6701:function(e,t,a){},d32f:function(e,t,a){},d4cc:function(e,t,a){"use strict";a("6701")},f602:function(e,t,a){"use strict";a("b0c0");var n=a("7a23"),o=Object(n["withScopeId"])("data-v-d08a5ff4"),d=o((function(e,t,a,d,c,l){var u=Object(n["resolveComponent"])("van-icon"),r=Object(n["resolveComponent"])("Uploader");return Object(n["openBlock"])(),Object(n["createBlock"])(r,{modelValue:d.fileList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.fileList=e}),"before-read":d.beforeRead,"after-read":d.afterRead,"max-size":d.isOverSize,"max-count":a.maxCount,accept:a.accept,"show-upload":!a.disabled,deletable:!a.disabled,name:a.name,onDelete:d.onDelete},{"preview-cover":o((function(e){return[Object(n["createVNode"])("div",{class:"mask-content",onClick:Object(n["withModifiers"])((function(t){return d.fileDownLoad(e)}),["stop"])},[Object(n["createVNode"])(u,{name:"down",class:"icon"})],8,["onClick"])]})),_:1},8,["modelValue","before-read","after-read","max-size","max-count","accept","show-upload","deletable","name","onDelete"])})),c=(a("9a83"),a("f564")),l=a("fc11"),u=(a("480b"),a("a37c")),r=(a("e930"),a("8f80")),i=(a("a9e3"),a("d81d"),a("ac1f"),a("1276"),a("4de4"),a("a15b"),a("2934")),m={name:"SUploader",components:Object(l["a"])({Uploader:r["a"]},u["a"].name,u["a"]),props:{modelValue:String,name:String,disabled:{type:Boolean,required:!1},type:{type:[String,void 0],validator:function(e){return void 0===e||-1!==["link"].indexOf(e)}},accept:{type:String,default:".rar,.zip,.doc,.docx,.pdf,.jpg,.png"},maxSize:{type:Number,default:50},maxCount:{type:Number,default:6}},setup:function(e,t){var a=Object(n["ref"])([]),o="link"===e.type,d=function(e){var t=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;return t.test(e)};Object(n["watch"])((function(){return e.modelValue}),(function(t,n){var c;o?a.value=null===(c=e.modelValue)||void 0===c?void 0:c.split(",").map((function(e){return{id:e,status:"done",url:e}})):!n&&t&&"-2"!==t?Object(i["h"])({ids:t}).then((function(e){0===e.code&&(a.value=e.data.map((function(e){return{id:e.id,name:e.fname,status:"done",url:d(e.furl)?e.furl:e.fname}})))})):t||(a.value=[])}),{immediate:!0}),Object(n["watch"])((function(){return a.value}),(function(e,a){var n=e.filter((function(e){return"uploading"!==e.status})).map((function(e){return e.id}));0===e.length?t.emit("update:modelValue",""):0===n.length?t.emit("update:modelValue","-2"):t.emit("update:modelValue",n.join(","))}),{deep:!0});var l=function(t){var a=t.size/1024/1024<e.maxSize;return a||Object(c["a"])({type:"warning",message:"上传的文件不能超过".concat(e.maxSize,"MB"),duration:1e3}),!a},u=function(e,t){return!0},r=function(e,t){e.status="uploading",e.message="上传中...";var a=new FormData;a.append("ft",""),a.append("file",e.file),(o?i["f"]:i["e"])(a).then((function(t){0===t.code&&(e.status="done",e.message="上传成功",e.id=o?t.msg:t.data)})).catch((function(){e.status="failed",e.message="上传失败"}))},m=function(e,t){},f=function(){};return{fileList:a,onDelete:m,isOverSize:l,beforeRead:u,afterRead:r,fileDownLoad:f}}};a("1dd3");m.render=d,m.__scopeId="data-v-d08a5ff4";t["a"]=m}}]);