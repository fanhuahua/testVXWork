(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd694c0"],{"3df0":function(e,t,l){"use strict";var a,n=l("7a23"),o=Object(n["withScopeId"])("data-v-7a85f5fa"),r=o((function(e,t,l,a,r,c){var u=Object(n["resolveComponent"])("van-field"),d=Object(n["resolveComponent"])("van-row"),m=Object(n["resolveComponent"])("van-cell"),s=Object(n["resolveComponent"])("van-checkbox"),i=Object(n["resolveComponent"])("van-cell-group"),b=Object(n["resolveComponent"])("van-checkbox-group"),f=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])(u,{modelValue:l.modelValue,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.modelValue=e}),readonly:"",clickable:"",label:l.label,placeholder:l.placeholder,onClick:a.Click,rules:l.rules,required:!!l.rules},null,8,["modelValue","label","placeholder","onClick","rules","required"]),Object(n["createVNode"])(f,{show:a.showPicker,"onUpdate:show":t[6]||(t[6]=function(e){return a.showPicker=e}),round:"",position:"bottom"},{default:o((function(){return[Object(n["createVNode"])(m,null,{default:o((function(){return[Object(n["createVNode"])(d,{justify:"space-between"},{default:o((function(){return[Object(n["createVNode"])("span",{onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(){return a.cancel&&a.cancel.apply(a,arguments)}),["stop"]))},"取消"),Object(n["createVNode"])("span",{onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(){return a.confirm&&a.confirm.apply(a,arguments)}),["stop"])),style:{color:"#0000cc"}},"确定")]})),_:1})]})),_:1}),Object(n["createVNode"])(b,{modelValue:a.checked,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.checked=e})},{default:o((function(){return[Object(n["createVNode"])(i,null,{default:o((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(l.columns,(function(e,l){return Object(n["openBlock"])(),Object(n["createBlock"])(m,{clickable:"",key:e,title:"".concat(e),onClick:function(e){return a.toggle(l)}},{"right-icon":o((function(){return[Object(n["createVNode"])(s,{name:e,onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(){}),["stop"])),ref:function(e){return a.checkboxRefs[l]=e}},null,8,["name"])]})),_:2},1032,["title","onClick"])})),128))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["show"])],64)})),c=l("54f8"),u=(l("e7e5"),l("d399")),d=l("fc11"),m=(l("a909"),l("3acc")),s=(l("3c32"),l("417e")),i=(l("b0c0"),l("a15b"),l("ac1f"),l("1276"),l("caad"),l("2532"),{components:(a={},Object(d["a"])(a,s["a"].name,s["a"]),Object(d["a"])(a,m["a"].name,m["a"]),a),props:{modelValue:{},label:{},placeholder:{},disabled:{},columns:{},rules:{},max:{}},setup:function(e,t){var l=Object(n["ref"])([]),a=Object(n["ref"])(!1),o=Object(n["ref"])([]),r=function(){l.value.length>e.max?u["a"].fail("最多选择".concat(e.max,"个")):(t.emit("update:modelValue",l.value.join(";")),a.value=!1)},d=function(e){o.value[e].toggle()},m=function(){a.value=!1},s=function(){if(!e.disabled){a.value=!0;var t=l.value.join(";");e.modelValue&&e.modelValue!=t&&Object(n["nextTick"])((function(){var t,l=e.modelValue.split(";"),a=Object(c["a"])(o.value);try{var n=function(){var e=t.value;l.includes(e.name)?setTimeout((function(){e.toggle(!0)})):setTimeout((function(){e.toggle(!1)}))};for(a.s();!(t=a.n()).done;)n()}catch(r){a.e(r)}finally{a.f()}}))}};return{showPicker:a,checked:l,checkboxRefs:o,confirm:r,toggle:d,cancel:m,Click:s}}});i.render=r,i.__scopeId="data-v-7a85f5fa";t["a"]=i},"54f8":function(e,t,l){"use strict";l.d(t,"a",(function(){return n}));l("a4d3"),l("e01a"),l("d3b7"),l("d28b"),l("3ca3"),l("ddb0");var a=l("dde1");function n(e,t){var l="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!l){if(Array.isArray(e)||(l=Object(a["a"])(e))||t&&e&&"number"===typeof e.length){l&&(e=l);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,u=!1;return{s:function(){l=l.call(e)},n:function(){var e=l.next();return c=e.done,e},e:function(e){u=!0,r=e},f:function(){try{c||null==l["return"]||l["return"]()}finally{if(u)throw r}}}}},"8a79":function(e,t,l){"use strict";var a=l("23e7"),n=l("06cf").f,o=l("50c4"),r=l("5a34"),c=l("1d80"),u=l("ab13"),d=l("c430"),m="".endsWith,s=Math.min,i=u("endsWith"),b=!d&&!i&&!!function(){var e=n(String.prototype,"endsWith");return e&&!e.writable}();a({target:"String",proto:!0,forced:!b&&!i},{endsWith:function(e){var t=String(c(this));r(e);var l=arguments.length>1?arguments[1]:void 0,a=o(t.length),n=void 0===l?a:s(o(l),a),u=String(e);return m?m.call(t,u,n):t.slice(n-u.length,n)===u}})},b1c2:function(e,t,l){"use strict";l.r(t);var a=l("7a23");function n(e,t,l,n,o,r){var c=Object(a["resolveComponent"])("van-field"),u=Object(a["resolveComponent"])("s-picker"),d=Object(a["resolveComponent"])("SDatetimePicker"),m=Object(a["resolveComponent"])("Selects"),s=Object(a["resolveComponent"])("van-cell-group"),i=Object(a["resolveComponent"])("AddOrEditModal");return Object(a["openBlock"])(),Object(a["createBlock"])(i,{mdl:n.state.mdl,save:n.saveQklw,name:"qklw",saveBefore:n.saveBefore,chooseParams:n.cparams.chooseParams,file:"require"},{content:Object(a["withCtx"])((function(e){return[Object(a["createVNode"])(s,{inset:""},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c,{modelValue:n.state.mdl.lwtm,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.state.mdl.lwtm=e}),label:"论文题目",rules:[{required:!0,message:"论文题目"}],name:"lwtm",required:"",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.qkmc,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.state.mdl.qkmc=e}),label:"期刊名称",rules:[{required:!0,message:"期刊名称"}],name:"qkmc",maxlength:"50",required:""},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.zy,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.state.mdl.zy=e}),label:"摘要",name:"zy",maxlength:"601",type:"textarea",rows:"3"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.gjc,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.state.mdl.gjc=e}),label:"关键词",name:"gjc",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(u,{modelValue:n.state.mdl.yz,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.state.mdl.yz=e}),columns:n.dict.ky_kycg_yz,"columns-field-names":{text:"dictLabel",setValue:"dictLabel"},rules:[{required:!0,message:"请选择"}],label:"语种",name:"yz"},null,8,["modelValue","columns"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.doi,"onUpdate:modelValue":t[6]||(t[6]=function(e){return n.state.mdl.doi=e}),label:"DOI",name:"doi",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.qkissnh,"onUpdate:modelValue":t[7]||(t[7]=function(e){return n.state.mdl.qkissnh=e}),label:"期刊ISSN号",name:"qkissnh",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(u,{modelValue:n.state.mdl.fbztmc,"onUpdate:modelValue":t[8]||(t[8]=function(e){return n.state.mdl.fbztmc=e}),columns:n.dict.ky_kycg_fbztmc,"columns-field-names":{text:"dictLabel",setValue:"dictLabel"},rules:[{required:!0,message:"请选择"}],label:"发表状态",name:"fbztmc",onFbztChange:n.fbztChange},null,8,["modelValue","columns","onFbztChange"]),Object(a["createVNode"])(d,{modelValue:n.state.mdl.fbrq,"onUpdate:modelValue":t[9]||(t[9]=function(e){return n.state.mdl.fbrq=e}),rules:[{required:n.fbzt,message:"请选择"}],label:"发表时间",name:"fbrq","value-format":"YYYY-MM-DD"},null,8,["modelValue","rules"]),Object(a["createVNode"])(m,{modelValue:n.state.mdl.srqk,"onUpdate:modelValue":t[10]||(t[10]=function(e){return n.state.mdl.srqk=e}),label:"收录情况",placeholder:"选择收录情况",disabled:e.disabled,columns:n.columns,max:"15",rules:n.slqk},null,8,["modelValue","disabled","columns","rules"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.yycs,"onUpdate:modelValue":t[11]||(t[11]=function(e){return n.state.mdl.yycs=e}),label:"引用次数",name:"yycs",type:"digit",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.jjbz,"onUpdate:modelValue":t[12]||(t[12]=function(e){return n.state.mdl.jjbz=e}),label:"基金标注",name:"jjbz",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.jh,"onUpdate:modelValue":t[13]||(t[13]=function(e){return n.state.mdl.jh=e}),label:"卷号",name:"jh",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.qh,"onUpdate:modelValue":t[14]||(t[14]=function(e){return n.state.mdl.qh=e}),label:"期号",name:"qh",maxlength:"50"},null,8,["modelValue"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.ksym,"onUpdate:modelValue":t[15]||(t[15]=function(e){return n.state.mdl.ksym=e}),label:"开始页码",name:"ksym",type:"digit",maxlength:"5",rules:[{validator:n.pageValidator,message:"开始页码要小等于结束页码"}]},null,8,["modelValue","rules"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.jsym,"onUpdate:modelValue":t[16]||(t[16]=function(e){return n.state.mdl.jsym=e}),label:"结束页码",name:"jsym",type:"digit",maxlength:"7",rules:[{validator:n.pageValidator,message:"开始页码要小等于结束页码"}]},null,8,["modelValue","rules"]),Object(a["createVNode"])(c,{modelValue:n.state.mdl.remark,"onUpdate:modelValue":t[17]||(t[17]=function(e){return n.state.mdl.remark=e}),label:"备注",name:"remark",type:"textarea",rows:"3",maxlength:"201"},null,8,["modelValue"])]})),_:2},1024)]})),_:1},8,["mdl","save","saveBefore","chooseParams"])}var o=l("c964"),r=(l("a15b"),l("8a79"),l("fb6a"),l("d81d"),l("ac1f"),l("1276"),l("96cf"),l("056e")),c=l("b775");l("989b");function u(e){return Object(c["b"])({url:"/ky/qklw/"+e,method:"get",loadingLoader:"getQklw"})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(c["b"])({url:"/ky/qklw/",method:e.id?"put":"post",data:e,loadingLoader:"saveQklw".concat(t)})}var m=l("6c02"),s=l("3631"),i=l("b48e"),b=l("9670b"),f=l("3df0"),p={name:"Qklw",components:{AddOrEditModal:r["a"],SPicker:s["a"],SDatetimePicker:b["a"],Selects:f["a"]},props:{},setup:function(){Object(a["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));var e=Object(a["reactive"])({chooseParams:{}}),t=Object(a["reactive"])({mdl:{}}),l=Object(a["ref"])(!0),n=Object(a["ref"])([{required:!0,message:"请选择"}]),r=Object(m["c"])(),c=r.params,s=Object(i["c"])(["ky_kycg_yz","ky_kycg_fbztmc","ky_kycg_srqk"]);c.id&&u(c.id).then((function(a){for(var o in t.mdl=a.data.tgxxxzxKycgglQklw,"已发表"==t.mdl.fbztmc?(l.value=!0,n.value=[{required:!0,message:"请选择"}]):(l.value=!1,n.value=void 0),e.chooseParams={deptNo:t.mdl.ssjgdm},t.mdl.qklwZzxxList=a.data.qklwZzxxList,t.mdl.srqk=t.mdl.srqkList.join(";"),t.mdl)o.endsWith("rq")&&t.mdl[o]&&(t.mdl[o]=t.mdl[o].slice(0,10))}));var b=Object(a["computed"])((function(){if(s.ky_kycg_srqk)return s.ky_kycg_srqk.map((function(e){return e.dictLabel}))})),f=function(){if(t.mdl.ksym||t.mdl.jsym){var e=function(){return null!==t.mdl.ksym&&void 0!==t.mdl.ksym&&""!==t.mdl.ksym&&(null!==t.mdl.jsym&&void 0!==t.mdl.jsym&&""!==t.mdl.jsym)}();return!!e&&!(parseInt(t.mdl.ksym)>parseInt(t.mdl.jsym))}},p=function(){t.mdl.srqk&&(t.mdl.srqkList=t.mdl.srqk.split(";"))},j=function(e){1==e?(l.value=!0,n.value=[{required:!0,message:"请选择"}]):(l.value=!1,n.value=void 0)};return{cparams:e,state:t,dict:s,columns:b,saveQklw:d,fbzt:l,slqk:n,saveBefore:p,pageValidator:f,fbztChange:j}}};p.render=n;t["default"]=p}}]);