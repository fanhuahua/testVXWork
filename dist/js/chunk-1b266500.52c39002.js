(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b266500"],{1148:function(e,t,n){"use strict";var a=n("a691"),l=n("1d80");e.exports=function(e){var t=String(l(this)),n="",c=a(e);if(c<0||c==1/0)throw RangeError("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(t+=t))1&c&&(n+=t);return n}},"1dd3":function(e,t,n){"use strict";n("d32f")},"38c9":function(e,t,n){},"3e85":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),l=Object(a["withScopeId"])("data-v-73249a82");Object(a["pushScopeId"])("data-v-73249a82");var c=Object(a["createTextVNode"])("基本信息"),o=Object(a["createTextVNode"])("归属信息"),r=Object(a["createTextVNode"])("合作单位信息"),d=Object(a["createTextVNode"])("推荐人信息"),i=Object(a["createTextVNode"])("成员信息"),u=Object(a["createTextVNode"])("经费信息"),f={key:0,style:{padding:"5px 0 10px 20px",background:"#fff"}},s=Object(a["createVNode"])("div",{class:"line"},[Object(a["createVNode"])("div",{class:"name"},"科目名称"),Object(a["createVNode"])("div",{class:"je"},"金额(万元)"),Object(a["createVNode"])("div",{class:"mark"},"备注说明")],-1),m={class:"total"};Object(a["popScopeId"])();var b=l((function(e,t,n,b,v,j){var p=Object(a["resolveComponent"])("van-divider"),O=Object(a["resolveComponent"])("van-cell"),g=Object(a["resolveComponent"])("van-cell-group"),N=Object(a["resolveComponent"])("s-uploader"),x=Object(a["resolveComponent"])("treeNode"),V=Object(a["resolveComponent"])("ApprovalCommon");return Object(a["openBlock"])(),Object(a["createBlock"])(V,Object(a["mergeProps"])(v.mdl,{chooseParams:v.state,"type-name":"纵向项目申报",onSubmit:j.onSubmit,btnLoading:e.$wait.is(""),applyInfo:v.mdl}),{default:l((function(){return[Object(a["createVNode"])(p,{"content-position":"left"},{default:l((function(){return[c]})),_:1}),Object(a["createVNode"])(g,null,{default:l((function(){return[Object(a["createVNode"])(O,{title:"项目名称",value:v.mdl.xmmc},null,8,["value"]),Object(a["createVNode"])(O,{title:"项目编号(内部)",value:v.mdl.xmbh},null,8,["value"]),Object(a["createVNode"])(O,{title:"项目编号",value:v.mdl.sdbh},null,8,["value"]),Object(a["createVNode"])(O,{title:"项目批次",value:v.mdl.xmpcmc},null,8,["value"]),Object(a["createVNode"])(O,{title:"关键词",value:v.mdl.gjc},null,8,["value"]),Object(a["createVNode"])(O,{title:"项目类别",value:v.mdl.xmlb},null,8,["value"]),Object(a["createVNode"])(O,{title:"项目来源",value:v.mdl.xmly},null,8,["value"]),Object(a["createVNode"])(O,{title:"研究类型",value:v.mdl.yjlx},null,8,["value"]),Object(a["createVNode"])(O,{title:"学科门类（一级学科）",value:v.mdl.yjxk},null,8,["value"]),Object(a["createVNode"])(O,{title:"项目描述",value:v.mdl.xmms},null,8,["value"]),Object(a["createVNode"])(O,{title:"预期成果",value:v.mdl.yqcg},null,8,["value"]),Object(a["createVNode"])(O,{title:"字数(千字)",value:v.mdl.zs},null,8,["value"])]})),_:1}),Object(a["createVNode"])(p,{"content-position":"left"},{default:l((function(){return[o]})),_:1}),Object(a["createVNode"])(g,null,{default:l((function(){return[Object(a["createVNode"])(O,{title:"所属平台",value:v.mdl.ssjgmc},null,8,["value"]),Object(a["createVNode"])(O,{title:"所属学院",value:v.mdl.ssyxmc},null,8,["value"])]})),_:1}),Object(a["createVNode"])(p,{"content-position":"left"},{default:l((function(){return[r]})),_:1}),Object(a["createVNode"])(g,null,{default:l((function(){return[Object(a["createVNode"])(O,{title:"合作单位名称",value:v.mdl.hzdwmc},null,8,["value"]),Object(a["createVNode"])(O,{title:"单位邮编",value:v.mdl.dwyb},null,8,["value"]),Object(a["createVNode"])(O,{title:"单位联系人",value:v.mdl.dwlxr},null,8,["value"]),Object(a["createVNode"])(O,{title:"联系电话",value:v.mdl.lxdh},null,8,["value"]),Object(a["createVNode"])(O,{title:"单位地址",value:v.mdl.dwdz},null,8,["value"])]})),_:1}),Object(a["createVNode"])(p,{"content-position":"left"},{default:l((function(){return[d]})),_:1}),Object(a["createVNode"])(g,null,{default:l((function(){return[Object(a["createVNode"])(O,{title:"第一推荐人",value:v.mdl.dytjr},null,8,["value"]),Object(a["createVNode"])(O,{title:"第一推荐人专业职称",value:v.mdl.dyzyzc},null,8,["value"]),Object(a["createVNode"])(O,{title:"第一推荐人工作单位",value:v.mdl.dygzdw},null,8,["value"]),Object(a["createVNode"])(O,{title:"第二推荐人",value:v.mdl.detjr},null,8,["value"]),Object(a["createVNode"])(O,{title:"第二推荐人专业职称",value:v.mdl.dezyzc},null,8,["value"]),Object(a["createVNode"])(O,{title:"第二推荐人工作单位",value:v.mdl.degzdw},null,8,["value"]),Object(a["createVNode"])(O,{title:"附件"},{"right-icon":l((function(){return[Object(a["createVNode"])(N,{modelValue:v.mdl.fj,"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.mdl.fj=e}),disabled:!0},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(p,{"content-position":"left"},{default:l((function(){return[i]})),_:1}),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(v.mdl.xmcyList,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(g,{class:"itemWrap",inset:"",key:e.id},{default:l((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(v.columns,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])(O,{key:t.dataIndex,title:t.title,value:e[t.dataIndex]},null,8,["title","value"])})),128))]})),_:2},1024)})),128)),Object(a["createVNode"])(p,{"content-position":"left"},{default:l((function(){return[u]})),_:1}),v.mdl.xmjfysList?(Object(a["openBlock"])(),Object(a["createBlock"])("div",f,[s,Object(a["createVNode"])(x,{treeData:v.jingfeiTree},null,8,["treeData"]),Object(a["createVNode"])("div",m,"合计费用:"+Object(a["toDisplayString"])(j.getTotal(v.mdl.xmjfysList))+"(万元)",1)])):Object(a["createCommentVNode"])("",!0)]})),_:1},16,["chooseParams","onSubmit","btnLoading","applyInfo"])})),v=(n("9a83"),n("f564")),j=n("f3f3"),p=(n("2b28"),n("9ed2")),O=(n("d81d"),n("b6802"),n("7db0"),n("135f")),g=n("b775");n("989b");function N(e){return Object(g["b"])({url:"/ky/zxxmxx/"+e,method:"get",loadingLoader:"getXmxx"})}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(g["b"])({url:"/ky/zxxmxx",method:e.id?"put":"post",data:e,loadingLoader:"saveXmxx".concat(t)})}function V(e){return Object(g["b"])({url:"/ky/jgxx/listR",method:"get",params:e,loadingLoader:"listRJgxx"})}var h=n("f602"),y=n("d0ff");n("4de4");function k(e,t,n,a,l){t=t||"id",n=n||"parentId",a=a||"children",l=l||Math.min.apply(Math,Object(y["a"])(e.map((function(e){return e[n]}))));var c=JSON.parse(JSON.stringify(e));return c.filter((function(e){var o=c.filter((function(a){return e[t]===a[n]}));return o.length>0?e[a]=o:delete e[a],e[n]===l}))}var w={class:"line"},S={class:"je"},z={class:"mark"};function B(e,t,n,l,c,o){var r=Object(a["resolveComponent"])("treeNode",!0);return Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(n.treeData,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"wrap",key:e.kmid},[Object(a["createVNode"])("div",w,[Object(a["createVNode"])("div",{class:"name",style:{paddingLeft:20*n.leaver+"px"}},Object(a["toDisplayString"])(e.kmmc),5),Object(a["createVNode"])("div",S,Object(a["toDisplayString"])(o.setTotal(e)),1),Object(a["createVNode"])("div",z,Object(a["toDisplayString"])(e.bzsm),1)]),e.children&&e.children.length?(Object(a["openBlock"])(),Object(a["createBlock"])(r,{key:0,treeData:e.children,leaver:n.leaver+1},null,8,["treeData","leaver"])):Object(a["createCommentVNode"])("",!0)])})),128)}n("a9e3");var I={name:"treeNode",props:{treeData:{default:[]},leaver:{default:0}},methods:{getTotal:function(e){return e.reduce((function(e,t){return e+t.je}),0).toFixed(2)},setTotal:function(e){return e.children&&(e.je=Number(this.getTotal(e.children))),e.je}}};n("9d52");I.render=B;var D=I,L={name:"zxxmzj",components:{ApprovalCommon:O["a"],SUploader:h["a"],vanDivider:p["a"],treeNode:D},data:function(){return{mdl:{},state:{},jingfeiTree:[],columns:[{title:"工号",dataIndex:"kyrygh"},{title:"姓名",dataIndex:"xm"}]}},created:function(){var e=this,t=this.$route.query;N(t.id).then((function(t){0===t.code&&(e.jingfeiTree=k(t.data.xmjfysList,"kmid","fkmid"),e.mdl=t.data,"发起人"!=e.mdl.taskName&&"待提交"!=e.mdl.taskName||V().then((function(t){var n=t.data,a=n.map((function(e){return Object(j["a"])(Object(j["a"])({},e),{},{disabled:e.disabled||"0"===e.lx})}));e.kyptOptions=a,e.state.deptId=e.getPtId(e.mdl.ssjgdm),e.state.deptNo=e.mdl.ssyxdm})))}))},methods:{getTotal:function(e){return e.reduce((function(e,t){return e+t.je}),0).toFixed(2)},getPtId:function(e){return e?this.kyptOptions.find((function(t){return t.jgdm===e})).deptId:void 0},onSubmit:function(e){var t=this;x(Object(j["a"])(Object(j["a"])({},this.mdl),e)).then((function(e){Object(v["a"])({type:"success",message:"操作成功",duration:1e3}),t.$router.back()}))}}};n("6246");L.render=b,L.__scopeId="data-v-73249a82";t["default"]=L},"408a":function(e,t,n){var a=n("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},6246:function(e,t,n){"use strict";n("9734")},9734:function(e,t,n){},"9d52":function(e,t,n){"use strict";n("38c9")},b6802:function(e,t,n){"use strict";var a=n("23e7"),l=n("a691"),c=n("408a"),o=n("1148"),r=n("d039"),d=1..toFixed,i=Math.floor,u=function(e,t,n){return 0===t?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)},f=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},s=function(e,t,n){var a=-1,l=n;while(++a<6)l+=t*e[a],e[a]=l%1e7,l=i(l/1e7)},m=function(e,t){var n=6,a=0;while(--n>=0)a+=e[n],e[n]=i(a/t),a=a%t*1e7},b=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var a=String(e[t]);n=""===n?a:n+o.call("0",7-a.length)+a}return n},v=d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){d.call({})}));a({target:"Number",proto:!0,forced:v},{toFixed:function(e){var t,n,a,r,d=c(this),i=l(e),v=[0,0,0,0,0,0],j="",p="0";if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return String(d);if(d<0&&(j="-",d=-d),d>1e-21)if(t=f(d*u(2,69,1))-69,n=t<0?d*u(2,-t,1):d/u(2,t,1),n*=4503599627370496,t=52-t,t>0){s(v,0,n),a=i;while(a>=7)s(v,1e7,0),a-=7;s(v,u(10,a,1),0),a=t-1;while(a>=23)m(v,1<<23),a-=23;m(v,1<<a),s(v,1,1),m(v,2),p=b(v)}else s(v,0,n),s(v,1<<-t,0),p=b(v)+o.call("0",i);return i>0?(r=p.length,p=j+(r<=i?"0."+o.call("0",i-r)+p:p.slice(0,r-i)+"."+p.slice(r-i))):p=j+p,p}})},d32f:function(e,t,n){},f602:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),l=Object(a["withScopeId"])("data-v-d08a5ff4"),c=l((function(e,t,n,c,o,r){var d=Object(a["resolveComponent"])("van-icon"),i=Object(a["resolveComponent"])("Uploader");return Object(a["openBlock"])(),Object(a["createBlock"])(i,{modelValue:c.fileList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.fileList=e}),"before-read":c.beforeRead,"after-read":c.afterRead,"max-size":c.isOverSize,"max-count":n.maxCount,accept:n.accept,"show-upload":!n.disabled,deletable:!n.disabled,name:n.name,onDelete:c.onDelete},{"preview-cover":l((function(e){return[Object(a["createVNode"])("div",{class:"mask-content",onClick:Object(a["withModifiers"])((function(t){return c.fileDownLoad(e)}),["stop"])},[Object(a["createVNode"])(d,{name:"down",class:"icon"})],8,["onClick"])]})),_:1},8,["modelValue","before-read","after-read","max-size","max-count","accept","show-upload","deletable","name","onDelete"])})),o=(n("9a83"),n("f564")),r=n("fc11"),d=(n("480b"),n("a37c")),i=(n("e930"),n("8f80")),u=(n("a9e3"),n("d81d"),n("ac1f"),n("1276"),n("4de4"),n("a15b"),n("2934")),f={name:"SUploader",components:Object(r["a"])({Uploader:i["a"]},d["a"].name,d["a"]),props:{modelValue:String,name:String,disabled:{type:Boolean,required:!1},type:{type:[String,void 0],validator:function(e){return void 0===e||-1!==["link"].indexOf(e)}},accept:{type:String,default:".rar,.zip,.doc,.docx,.pdf,.jpg,.png"},maxSize:{type:Number,default:50},maxCount:{type:Number,default:6}},setup:function(e,t){var n=Object(a["ref"])([]),l="link"===e.type,c=function(e){var t=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;return t.test(e)};Object(a["watch"])((function(){return e.modelValue}),(function(t,a){var o;l?n.value=null===(o=e.modelValue)||void 0===o?void 0:o.split(",").map((function(e){return{id:e,status:"done",url:e}})):!a&&t&&"-2"!==t?Object(u["h"])({ids:t}).then((function(e){0===e.code&&(n.value=e.data.map((function(e){return{id:e.id,name:e.fname,status:"done",url:c(e.furl)?e.furl:e.fname}})))})):t||(n.value=[])}),{immediate:!0}),Object(a["watch"])((function(){return n.value}),(function(e,n){var a=e.filter((function(e){return"uploading"!==e.status})).map((function(e){return e.id}));0===e.length?t.emit("update:modelValue",""):0===a.length?t.emit("update:modelValue","-2"):t.emit("update:modelValue",a.join(","))}),{deep:!0});var r=function(t){var n=t.size/1024/1024<e.maxSize;return n||Object(o["a"])({type:"warning",message:"上传的文件不能超过".concat(e.maxSize,"MB"),duration:1e3}),!n},d=function(e,t){return!0},i=function(e,t){e.status="uploading",e.message="上传中...";var n=new FormData;n.append("ft",""),n.append("file",e.file),(l?u["f"]:u["e"])(n).then((function(t){0===t.code&&(e.status="done",e.message="上传成功",e.id=l?t.msg:t.data)})).catch((function(){e.status="failed",e.message="上传失败"}))},f=function(e,t){},s=function(){};return{fileList:n,onDelete:f,isOverSize:r,beforeRead:d,afterRead:i,fileDownLoad:s}}};n("1dd3");f.render=c,f.__scopeId="data-v-d08a5ff4";t["a"]=f}}]);