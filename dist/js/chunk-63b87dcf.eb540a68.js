(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63b87dcf"],{"142b":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s}));var o=n("b775"),a={createApply:"/xg/jqtqfxsq/createApply/",jqtqfxsq:"/xg/jqtqfxsq/",checkDate:"/xg/jqtqfxsq/checkDate",searchTqfxList:"/xg/jqtqfxsq/list",downApply:"/xg/jqtqfxsq/downApply/",exportList:"/xg/jqtqfxsq/export",exportGetZds:"/xg/jqtqfxsq/export/getZds",importList:"/xg/jqtqfxsq/import",importGetZds:"/xg/jqtqfxsq/import/getZds",importTemplate:"/xg/jqtqfxsq/importTemplate",updateBatchZt:"/xg/jqtqfxsq/updateBatchZt",updateAudit:"/xg/jqtqfxsq/updateAudit"};function c(e){return Object(o["a"])({url:a.createApply+e,method:"get"})}function r(e,t){return Object(o["a"])({url:a.jqtqfxsq,method:e.id?"put":"post",data:e,loadingTips:t,loadingLoader:"saveFXSQ"})}function i(e,t){return Object(o["a"])({url:a.jqtqfxsq+e,method:"get",loadingTips:t})}function s(e){return Object(o["a"])({url:a.searchTqfxList,method:"get",params:e})}},"1dd3":function(e,t,n){"use strict";n("d32f")},"2baf":function(e,t,n){"use strict";n("9481")},3631:function(e,t,n){"use strict";n("b0c0");var o=n("7a23");function a(e,t,n,a,c,r){var i=Object(o["resolveComponent"])("van-field"),s=Object(o["resolveComponent"])("van-picker"),l=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(i,{name:n.name,required:a.required,modelValue:a.state.selected.text,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.state.selected.text=e}),"is-link":!a.computedDisabled,readonly:"",disabled:a.computedDisabled,onClick:a.onClick,placeholder:n.placeholder,rules:n.rules,columnsFieldNames:n.columnsFieldNames,label:n.label},null,8,["name","required","modelValue","is-link","disabled","onClick","placeholder","rules","columnsFieldNames","label"]),Object(o["createVNode"])(l,{show:a.state.showPicker,"onUpdate:show":t[3]||(t[3]=function(e){return a.state.showPicker=e}),position:n.position},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{columns:a.sColumns,loading:n.loading,"columns-field-names":n.columnsFieldNames,onConfirm:a.onConfirm,onCancel:t[2]||(t[2]=function(e){return a.state.showPicker=!1})},Object(o["createSlots"])({"columns-top":Object(o["withCtx"])((function(){return[Object(o["renderSlot"])(e.$slots,"columns-top")]})),_:2},[e.$slots.option?{name:"option",fn:Object(o["withCtx"])((function(t){return[Object(o["renderSlot"])(e.$slots,"option",t)]}))}:void 0]),1032,["columns","loading","columns-field-names","onConfirm"])]})),_:1},8,["show","position"])],64)}var c=n("0122"),r=n("d0af"),i=(n("7db0"),n("159b"),n("b64b"),n("2ca0"),n("ac1f"),n("1276"),n("e6b2")),s=n("ca00"),l=n("b48e"),u={name:"SPicker",emits:["click"],props:{modelValue:String,name:{type:String,required:!0},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},columns:{type:Array,default:function(){return[]}},rules:{type:Array,default:function(){return[]}},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:void 0},loading:Boolean,dictName:String,columnsFieldNames:{type:Object,default:function(){return{setValue:void 0,text:"text",values:"values",children:"children"}}}},setup:function(e,t){var n=Object(o["reactive"])({showPicker:!1,selected:{value:"",text:""}}),a=Object(i["a"])(Object(o["toRefs"])(e).disabled),u=Object(o["computed"])((function(){return!!e.rules.find((function(e){return e.required}))})),d=Object(o["toRefs"])(e),b=d.columnsFieldNames,p=d.columns,f=e.dictName?Object(l["b"])([e.dictName])[e.dictName]:p;Object(o["watch"])([function(){return e.modelValue},function(){return f.value}],(function(e,t){var o=Object(r["a"])(e,2),a=o[0],c=o[1],i=Object(r["a"])(t,2),l=(i[0],i[1],b.value.setValue),u=b.value.text,d=!0;if(l&&!Object(s["f"])(a)&&c.length){var p=c.find((function(e){return e[l]===a}));p&&(n.selected.text=p[u],n.selected.value=p[l],d=!1)}d&&(n.selected.text=a,n.selected.value=a)}),{immediate:!0});var m=function(e){t.emit("fbztChange",e.value),t.emit("ssyxChange",e),n.showPicker=!1;var o={value:e,text:e};"object"===Object(c["a"])(e)&&b.value.setValue&&(o.value=e[b.value.setValue],o.text=e[b.value.text]),n.selected=o,Object.keys(t.attrs).forEach((function(n){if(n.startsWith("onUpdate:")){var a=n.split("onUpdate:")[1];t.emit("update:".concat(a),"modelValue"===a?o.value:e[a])}}))},j=function(){!a.value&&(n.showPicker=!0),t.emit("click",{disabled:a.value})};return{state:n,computedDisabled:a,onConfirm:m,onClick:j,required:u,sColumns:f}}};u.render=a;t["a"]=u},"44ce":function(e,t,n){},"4a89":function(e,t,n){"use strict";var o=n("7a23");function a(e,t,n,a,c,r){var i=Object(o["resolveComponent"])("van-cell"),s=Object(o["resolveComponent"])("van-cell-group");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{inset:""},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{title:"姓名"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.studentInfo.xm),1)]})),_:1}),Object(o["createVNode"])(i,{title:"性别"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.studentInfo.xb),1)]})),_:1}),Object(o["createVNode"])(i,{title:"学号"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.studentInfo.xh),1)]})),_:1}),Object(o["createVNode"])(i,{title:"院系"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.studentInfo.ssxy),1)]})),_:1}),Object(o["createVNode"])(i,{title:"专业"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.studentInfo.zymc),1)]})),_:1}),Object(o["createVNode"])(i,{title:"班级"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.studentInfo.bjmc),1)]})),_:1}),Object(o["renderSlot"])(e.$slots,"default")]})),_:3})}var c=n("d0ff"),r=(n("99af"),n("bd56")),i=n("ca00"),s=n("6c02"),l=n("bade"),u={name:"StudentInfoCell",emits:["update:studentInfo","updateInfo"],props:{requestFunc:{type:Function,isRequired:!0,default:r["b"]},studentInfo:{type:Object,isRequired:!0,default:function(){return{}}},addPickKey:{type:Array,default:function(){return[]}},errorBack:{type:Boolean,default:!1}},setup:function(e,t){var n=Object(s["d"])(),o=["xm","xh","xb","ssxy","zymc","bjmc"],a=function(){return e.requestFunc().then((function(n){if(0===n.code){var a=Object(i["k"])(n.data,[].concat(o,Object(c["a"])(e.addPickKey)));return t.emit("update:studentInfo",Object.assign(e.studentInfo,a)),t.emit("updateInfo",n.data),a}})).catch((function(t){e.errorBack&&n.back()}))};return Object(l["c"])(["xg_xs"])&&a(),{getStudentInfo:a}}};u.render=a;t["a"]=u},"7e40":function(e,t,n){"use strict";n("b268")},"7ff9":function(e,t,n){"use strict";n("b0c0");var o=n("7a23"),a=Object(o["withScopeId"])("data-v-2db1d158"),c=a((function(e,t,n,c,r,i){var s=Object(o["resolveComponent"])("van-field"),l=Object(o["resolveComponent"])("van-picker"),u=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["withDirectives"])(Object(o["createVNode"])(s,{name:"procDefKey",modelValue:c.state.key,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.state.key=e})},null,8,["modelValue"]),[[o["vShow"],!1]]),Object(o["createVNode"])(s,{modelValue:c.state.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.state.name=e}),readonly:"",clickable:"",required:"","is-link":"",name:"name",label:"审批流程",placeholder:"点击选择",onClick:t[3]||(t[3]=function(e){return c.state.isShow=!0}),rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),Object(o["createVNode"])(u,{show:c.state.isShow,"onUpdate:show":t[4]||(t[4]=function(e){return c.state.isShow=e}),position:"bottom"},{default:a((function(){return[Object(o["createVNode"])(l,{title:"审批流程","columns-field-names":{text:"name"},columns:n.proList,onConfirm:c.onConfirm,onCancel:c.onCancel,onChange:c.onChange},null,8,["columns","onConfirm","onCancel","onChange"])]})),_:1},8,["show"])])})),r=(n("2934"),{name:"classroomFilter",setup:function(e,t){var n=Object(o["reactive"])({name:"",key:"",isShow:!1}),a=function(e,t){n.name=e.name,n.key=e.key,n.isShow=!1},c=function(e,t){},r=function(){n.isShow=!1},i=function(){n.name="",n.key=""};return{state:n,onChange:c,onCancel:r,onConfirm:a,restData:i}},data:function(){return{xqList:[]}},components:{},created:function(){},computed:{},props:["proList","multiInstance"],watch:{proList:function(e){e&&1==e.length&&(this.state.name=e[0].name,this.state.key=e[0].key)}},methods:{}});r.render=c,r.__scopeId="data-v-2db1d158";t["a"]=r},"8bdf":function(e,t,n){"use strict";var o=n("7a23"),a=Object(o["withScopeId"])("data-v-de4264ea");Object(o["pushScopeId"])("data-v-de4264ea");var c={class:"approval-common"},r=Object(o["createVNode"])("div",{class:"approval-head"},null,-1),i={class:"approval-content"},s={class:"approval-foot"};Object(o["popScopeId"])();var l=a((function(e,t,n,l,u,d){var b=Object(o["resolveComponent"])("approval-process"),p=Object(o["resolveComponent"])("van-action-bar-icon"),f=Object(o["resolveComponent"])("van-action-bar-button"),m=Object(o["resolveComponent"])("approval-buttons"),j=Object(o["resolveComponent"])("van-action-bar"),O=Object(o["resolveComponent"])("approval-modal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",c,[r,Object(o["createVNode"])("div",i,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)]),Object(o["createVNode"])("div",s,[n.isWorkFlow?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,style:{"margin-bottom":"10px"},processInstanceId:n.processInstanceId},null,8,["processInstanceId"])):Object(o["createCommentVNode"])("",!0),l.visible?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:1},{default:a((function(){return[Object(o["createVNode"])(p,{class:{disabledIcon:n.btnLoading},icon:"arrow-left",text:"返回",loading:n.btnLoading,onClick:t[1]||(t[1]=function(e){return!n.btnLoading&&l.back()})},null,8,["class","loading"]),Object(o["createVNode"])(m,{authority:n.authority},{tui:a((function(){return[n.isWorkFlow?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,class:{disabledIcon:n.btnLoading},icon:"down",text:"退回",onClick:t[2]||(t[2]=function(e){return!n.btnLoading&&l.handleOk(4)})},null,8,["class"])):Object(o["createCommentVNode"])("",!0)]})),reject:a((function(){return[n.isWorkFlow?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,class:{disabledIcon:n.btnLoading},icon:"failure",text:"拒绝",onClick:t[3]||(t[3]=function(e){return!n.btnLoading&&l.handleOk(2)})},null,8,["class"])):Object(o["createCommentVNode"])("",!0)]})),agree:a((function(){return[n.isWorkFlow?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:0,type:"danger",text:"同意",loading:n.btnLoading,onClick:t[4]||(t[4]=function(e){return l.handleOk(1)})},null,8,["loading"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["authority"])]})),_:1})):Object(o["createCommentVNode"])("",!0)])]),n.isWorkFlow?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,ref:"approvalRef","type-name":n.typeName,processInstanceId:n.processInstanceId,chooseParams:n.chooseParams,taskId:n.taskId,"proc-def-key":n.procDefKey},null,8,["type-name","processInstanceId","chooseParams","taskId","proc-def-key"])):Object(o["createCommentVNode"])("",!0)],64)})),u=n("c964"),d=n("fc11"),b=(n("7279"),n("a792")),p=(n("71ba"),n("a3f9")),f=(n("21f7"),n("d3d4")),m=(n("96cf"),n("b0c0"),n("a9e3"),n("d3b7"),n("bade"),Object(o["withScopeId"])("data-v-3009d9d2"));Object(o["pushScopeId"])("data-v-3009d9d2");var j={key:0,class:"tipWrap"},O={key:1,class:"tipWrap"},v={key:2},h={class:"btns"},g=Object(o["createTextVNode"])(" 取消 "),k=Object(o["createTextVNode"])(" 确定 ");Object(o["popScopeId"])();var y=m((function(e,t,n,a,c,r){var i=Object(o["resolveComponent"])("tuihui"),s=Object(o["resolveComponent"])("xzsplc"),l=Object(o["resolveComponent"])("van-field"),u=Object(o["resolveComponent"])("xygspr"),d=Object(o["resolveComponent"])("xygsprMult"),b=Object(o["resolveComponent"])("van-form"),p=Object(o["resolveComponent"])("van-button"),f=Object(o["resolveComponent"])("s-loading"),y=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createBlock"])(y,{show:e.visible,"onUpdate:show":t[3]||(t[3]=function(t){return e.visible=t}),position:"bottom"},{default:m((function(){return[Object(o["createVNode"])(f,{loading:e.$wait.is("chooseAssignee")},{default:m((function(){return[3===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])("div",j,"是否确认撤回该流程?")):0===e.action&&n.processInstanceId?(Object(o["openBlock"])(),Object(o["createBlock"])("div",O," 是否保存该数据? ")):(Object(o["openBlock"])(),Object(o["createBlock"])("div",v,[e.visible?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,ref:"formRef",onSubmit:a.onSubmit},{default:m((function(){return[4===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,rejectTaskList:e.rejectTaskList,ref:function(t){return e.refData.tuihui=t},processInstanceId:n.processInstanceId},null,8,["rejectTaskList","processInstanceId"])):Object(o["createCommentVNode"])("",!0),e.validatedForm.id?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,proList:e.proList,ref:function(t){return e.refData.xzsplc=t}},null,8,["proList"])),4!==e.action&&2!==e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:2,name:"xygspjd",label:"下一节点",modelValue:e.nextName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.nextName=t}),disabled:"",placeholder:"请输入"},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(u,{required:r.showNext,assigneeList:e.assigneeList,ref:function(t){return e.refData.xygspr=t}},null,8,["required","assigneeList"]),[[o["vShow"],r.showNext]]),r.showNextMul?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:3,required:r.showNextMul,assigneeList:e.assigneeList,ref:function(t){return e.refData.xygsprMult=t}},null,8,["required","assigneeList"])):Object(o["createCommentVNode"])("",!0),n.processInstanceId&&1===e.action||2===e.action||4===e.action?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:4,required:"",modelValue:e.comment,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.comment=t}),rows:"2",autosize:"",name:"comment",label:"审批意见",type:"textarea",placeholder:"请输入",maxlength:"200","show-word-limit":"",rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["onSubmit"])):Object(o["createCommentVNode"])("",!0)])),Object(o["createVNode"])("div",h,[Object(o["createVNode"])(p,{class:"bottomBtn",round:"",onClick:r.handleRest},{default:m((function(){return[g]})),_:1},8,["onClick"]),Object(o["createVNode"])(p,{loading:e.$wait.is("saveJSSYSQ"),class:"bottomBtn",round:"",type:"primary",onClick:a.handlSubmit},{default:m((function(){return[k]})),_:1},8,["loading","onClick"])])]})),_:1},8,["loading"])]})),_:1},8,["show"])})),x=n("f3f3"),N=(n("caad"),n("2532"),n("ac1f"),n("1276"),n("b64b"),n("159b"),n("eab0")),C=n("7ff9"),w=n("6ff2"),V=n("8491"),I=n("2934"),q=n("c5e6"),S={name:"ApprovalModal",components:{tuihui:N["a"],xzsplc:C["a"],xygspr:w["a"],xygsprMult:V["a"],SLoading:q["a"]},setup:function(e,t){var n=Object(o["ref"])(null),a=Object(o["reactive"])({comment:"",visible:!1,refData:{},validatedForm:{},action:0,myPromise:void 0,proList:[],rejectTaskList:[],assigneeList:[],multiInstance:!1,nextName:void 0}),c=function(e){return"string"===typeof e?e.includes(",")?[e]:e.split(","):e},r=function(t){var n,o,r,i=t&&t.assigneeList?c(t.assigneeList):[];a.myPromise&&a.myPromise.resolve(Object(x["a"])(Object(x["a"])({},a.validatedForm),{},{processParam:Object(x["a"])(Object(x["a"])({},t),{},{assigneeList:i,id:null===(n=a.validatedForm)||void 0===n?void 0:n.id,processInstanceId:a.processInstanceId||(null===(o=a.validatedForm)||void 0===o?void 0:o.processInstanceId)||e.processInstanceId,taskId:a.taskId||(null===(r=a.validatedForm)||void 0===r?void 0:r.taskId)||e.taskId,action:a.action,variables:a.chooseParams||e.chooseParams})}))},i=function(){3===a.action||0===a.action&&e.processInstanceId?r():n.value.submit()},s=function(e){r(e)},l=function(){a.visible=!0},u=function(){a.visible=!1},d=function(){var e=Object.keys(a.refData);e.length>0&&e.forEach((function(e){var t;null===(t=a.refData[e])||void 0===t||t.restData()})),a.visible=!1};return Object(x["a"])(Object(x["a"])({},Object(o["toRefs"])(a)),{},{formRef:n,onSubmit:s,showPopup:l,handleCancle:u,resetForm:d,handlSubmit:i})},data:function(){return{}},created:function(){},computed:{showNext:function(){return(1===this.action||9===this.action)&&"结束"!==this.nextName&&!this.multiInstance},showNextMul:function(){return(1===this.action||9===this.action)&&"结束"!==this.nextName&&this.multiInstance}},props:{typeName:{type:String,required:!0},procDefKey:{type:[String,Number],default:void 0},processInstanceId:{type:[String,Number],default:void 0},taskId:{type:[String,Number],default:void 0},params:{type:Object,default:function(){return{}}},chooseParams:{type:Object,default:function(){return{}}}},watch:{visible:function(e){var t=this;e&&(this.validatedForm.id?4===this.action?this.getRejectList():1!==this.action&&9!==this.action||this.getNextList():this.procDefKey?this.getNextList():Object(I["j"])(Object(x["a"])({typeName:this.typeName},this.params)).then((function(e){t.proList=e.data,1===e.data.length&&t.getNextList(e.data[0].key)})))}},methods:{handleOk:function(){this.$refs.form.submit()},handleRest:function(){this.resetForm()},getNextList:function(e){var t=this;Object(I["c"])(Object(x["a"])(Object(x["a"])({processInstanceId:this.processInstanceId,procDefKey:e||this.procDefKey,skip:1},this.chooseParams),{},{formData:this.validatedForm.applyInfo})).then((function(e){var n=e.data,o=n.multiInstance,a=n.assigneeList,c=n.name;t.assigneeList=a,t.multiInstance=o,t.nextName=c}))},getRejectList:function(){var e=this;Object(I["l"])({processInstanceId:this.processInstanceId}).then((function(t){e.rejectTaskList=t.data}))},startApproval:function(e,t){var n=this;return this.validatedForm=e,this.action=t,this.visible=!0,new Promise((function(e,t){n.myPromise={resolve:e,reject:t}}))}}};n("2baf");S.render=y,S.__scopeId="data-v-3009d9d2";var L=S,B=Object(o["createVNode"])("div",{style:{margin:"12px","font-size":"16px"}},"审批流程",-1),D={style:{padding:"0 10px"}},F={style:{color:"rgba(0, 0, 0, 0.85)"}},_={style:{color:"rgba(0, 0, 0, 0.45)"}},T={style:{color:"rgba(18, 28, 37, 0.65)"}},A={style:{color:"rgba(18, 28, 37, 0.45)","text-align":"right"}};function P(e,t,n,a,c,r){var i=Object(o["resolveComponent"])("van-col"),s=Object(o["resolveComponent"])("van-row"),l=Object(o["resolveComponent"])("van-step"),u=Object(o["resolveComponent"])("van-steps"),d=Object(o["resolveComponent"])("van-empty"),b=Object(o["resolveComponent"])("van-cell-group");return Object(o["openBlock"])(),Object(o["createBlock"])(b,{inset:""},{default:Object(o["withCtx"])((function(){return[B,Object(o["withDirectives"])(Object(o["createVNode"])(u,{direction:"vertical"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.timeLineData,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:t},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{type:"flex"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(i,{span:16},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",D,[Object(o["createVNode"])("div",F,Object(o["toDisplayString"])(e.taskName),1),Object(o["createVNode"])("div",_,Object(o["toDisplayString"])(e.auditNickName)+"（"+Object(o["toDisplayString"])(e.auditTypeName)+"） ",1),Object(o["createVNode"])("div",T,Object(o["toDisplayString"])(e.auditNote&&"审批意见:".concat(e.auditNote)),1)])]})),_:2},1024),Object(o["createVNode"])(i,{span:8},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",A,Object(o["toDisplayString"])(e.auditTime),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128)),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" 当前节点："+Object(o["toDisplayString"])(c.currentName),1)]})),_:1})]})),_:1},512),[[o["vShow"],c.timeLineData.length]]),Object(o["withDirectives"])(Object(o["createVNode"])(d,null,null,512),[[o["vShow"],!c.timeLineData.length]])]})),_:1})}n("91d5");var R,z=n("f0ca"),$=(n("1f87"),n("510b")),U=(n("77f8"),n("dc0f")),W={name:"ApprovalProcess",props:{processInstanceId:{type:[String,Number],default:void 0}},data:function(){return{timeLineData:[],currentName:void 0}},components:(R={},Object(d["a"])(R,U["a"].name,U["a"]),Object(d["a"])(R,$["a"].name,$["a"]),Object(d["a"])(R,z["a"].name,z["a"]),R),watch:{processInstanceId:{immediate:!0,handler:function(e){e?this.getViewTask(e):(this.timeLineData=[],this.currentName=void 0)}}},created:function(){},methods:{getViewTask:function(e){var t=this;Object(I["o"])({processInstanceId:e}).then((function(e){e.data.length>1?(t.timeLineData=e.data,t.currentName=t.timeLineData.pop().taskName):(t.timeLineData=[],t.currentName=!1)}))}}};W.render=P;var M=W,K=Object(o["withScopeId"])("data-v-2d2d0c63"),E=K((function(e,t,n,a,c,r){return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["renderSlot"])(e.$slots,"cancel",{},void 0,!0),n.authority&&n.authority.canEdit?Object(o["renderSlot"])(e.$slots,"edit",{key:0},void 0,!0):Object(o["createCommentVNode"])("",!0),n.authority&&n.authority.canEdit?Object(o["renderSlot"])(e.$slots,"submit",{key:1},void 0,!0):Object(o["createCommentVNode"])("",!0),n.authority&&n.authority.canChe?Object(o["renderSlot"])(e.$slots,"che",{key:2},void 0,!0):Object(o["createCommentVNode"])("",!0),n.authority&&n.authority.canTui?Object(o["renderSlot"])(e.$slots,"tui",{key:3},void 0,!0):Object(o["createCommentVNode"])("",!0),n.authority&&n.authority.canApproval?Object(o["renderSlot"])(e.$slots,"reject",{key:4},void 0,!0):Object(o["createCommentVNode"])("",!0),n.authority&&n.authority.canApproval?Object(o["renderSlot"])(e.$slots,"agree",{key:5},void 0,!0):Object(o["createCommentVNode"])("",!0),n.authority&&n.authority.canAgain?Object(o["renderSlot"])(e.$slots,"again",{key:6},void 0,!0):Object(o["createCommentVNode"])("",!0)],64)})),Q={name:"ApprovalButtons",props:{authority:{type:Object,default:function(){return{}}}}};n("7e40");Q.render=E,Q.__scopeId="data-v-2d2d0c63";var Z,J=Q,X=n("ca00"),G=n("6c02"),Y={name:"ApprovalCommon",components:(Z={ApprovalButtons:J,ApprovalProcess:M,ApprovalModal:L},Object(d["a"])(Z,f["b"].name,f["b"]),Object(d["a"])(Z,p["a"].name,p["a"]),Object(d["a"])(Z,b["b"].name,b["b"]),Z),props:{btnLoading:Boolean,id:Number,chooseParams:Object,applyInfo:Object,authority:{type:Object,default:function(){return{canEdit:!1,canChe:!1,canTui:!1,canApproval:!1}}},typeName:{type:String,default:""},procDefKey:{type:[String,Number],default:void 0},processInstanceId:{type:[String,Number],default:void 0},taskId:{type:[String,Number],default:void 0},taskName:{type:String,default:""},beforeSubmitValidate:[Function,Promise],isWorkFlow:{type:Boolean,default:!0}},emits:["submit","cancel"],setup:function(e,t){var n,a=Object(o["ref"])(null),c=function(){var o=Object(u["a"])(regeneratorRuntime.mark((function o(c){var r,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,o.t0=e.beforeSubmitValidate,!o.t0){o.next=6;break}return o.next=5,e.beforeSubmitValidate();case 5:n=o.sent;case 6:o.next=11;break;case 8:o.prev=8,o.t1=o["catch"](0),n="error";case 11:if(!n){o.next=13;break}return o.abrupt("return");case 13:r=Object(X["h"])(e,["beforeSubmitValidate","btnLoading","chooseParams","isWorkFlow"]),e.isWorkFlow?null===(i=a.value)||void 0===i||i.startApproval(r,c).then((function(e){var n;t.emit("submit",e,c),null===(n=a.value)||void 0===n||n.resetForm()})):t.emit("submit",r,c);case 15:case"end":return o.stop()}}),o,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}(),r=function(){t.emit("cancel")},i=Object(G["d"])(),s=i.back,l=Object(o["toRefs"])(e),d=l.authority,b=Object(o["computed"])((function(){return d.value.canEdit||d.value.canChe||d.value.canTui||d.value.canApproval}));return{back:s,handleOk:c,handleCancel:r,approvalRef:a,visible:b}}};n("b24b");Y.render=l,Y.__scopeId="data-v-de4264ea";t["a"]=Y},9481:function(e,t,n){},b24b:function(e,t,n){"use strict";n("44ce")},b268:function(e,t,n){},bd56:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d}));var o=n("b775"),a={createApply:"/xg/qjsq/addApply",qjsq:"/xg/qjsq/",checkDate:"/xg/qjsq/checkDate",searchQjsqList:"/xg/qjsq/list",updateAudit:"/xg/qjsq/updateAudit"};function c(){return Object(o["a"])({url:"/xg/xgxsxx/getXsxx",method:"get",loadingLoader:"getXsxx"})}function r(e,t){return Object(o["a"])({url:a.qjsq,method:e.id?"put":"post",data:e,loadingLoader:"saveXSQJSQ",loadingTips:t})}function i(e,t){return Object(o["a"])({url:a.qjsq,method:"delete",data:e,loadingTips:t})}function s(e,t){return Object(o["a"])({url:"/xg/qjsq/removeSubmitData",method:"delete",data:e,loadingTips:t})}function l(e,t){return Object(o["a"])({url:a.qjsq+e,method:"get",loadingTips:t})}function u(e){return Object(o["a"])({url:a.searchQjsqList,method:"get",params:e})}function d(e,t){return Object(o["a"])({url:"/xg/qjsq/xj/"+e,method:"get",loadingTips:t})}},d32f:function(e,t,n){},f602:function(e,t,n){"use strict";n("b0c0");var o=n("7a23"),a=Object(o["withScopeId"])("data-v-d08a5ff4"),c=a((function(e,t,n,c,r,i){var s=Object(o["resolveComponent"])("van-icon"),l=Object(o["resolveComponent"])("Uploader");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{modelValue:c.fileList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.fileList=e}),"before-read":c.beforeRead,"after-read":c.afterRead,"max-size":c.isOverSize,"max-count":n.maxCount,accept:n.accept,"show-upload":!n.disabled,deletable:!n.disabled,name:n.name,onDelete:c.onDelete},{"preview-cover":a((function(e){return[Object(o["createVNode"])("div",{class:"mask-content",onClick:Object(o["withModifiers"])((function(t){return c.fileDownLoad(e)}),["stop"])},[Object(o["createVNode"])(s,{name:"down",class:"icon"})],8,["onClick"])]})),_:1},8,["modelValue","before-read","after-read","max-size","max-count","accept","show-upload","deletable","name","onDelete"])})),r=(n("9a83"),n("f564")),i=n("fc11"),s=(n("480b"),n("a37c")),l=(n("e930"),n("8f80")),u=(n("a9e3"),n("d81d"),n("ac1f"),n("1276"),n("4de4"),n("a15b"),n("2934")),d={name:"SUploader",components:Object(i["a"])({Uploader:l["a"]},s["a"].name,s["a"]),props:{modelValue:String,name:String,disabled:{type:Boolean,required:!1},type:{type:[String,void 0],validator:function(e){return void 0===e||-1!==["link"].indexOf(e)}},accept:{type:String,default:".rar,.zip,.doc,.docx,.pdf,.jpg,.png"},maxSize:{type:Number,default:50},maxCount:{type:Number,default:6}},setup:function(e,t){var n=Object(o["ref"])([]),a="link"===e.type,c=function(e){var t=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;return t.test(e)};Object(o["watch"])((function(){return e.modelValue}),(function(t,o){var r;a?n.value=null===(r=e.modelValue)||void 0===r?void 0:r.split(",").map((function(e){return{id:e,status:"done",url:e}})):!o&&t&&"-2"!==t?Object(u["h"])({ids:t}).then((function(e){0===e.code&&(n.value=e.data.map((function(e){return{id:e.id,name:e.fname,status:"done",url:c(e.furl)?e.furl:e.fname}})))})):t||(n.value=[])}),{immediate:!0}),Object(o["watch"])((function(){return n.value}),(function(e,n){var o=e.filter((function(e){return"uploading"!==e.status})).map((function(e){return e.id}));0===e.length?t.emit("update:modelValue",""):0===o.length?t.emit("update:modelValue","-2"):t.emit("update:modelValue",o.join(","))}),{deep:!0});var i=function(t){var n=t.size/1024/1024<e.maxSize;return n||Object(r["a"])({type:"warning",message:"上传的文件不能超过".concat(e.maxSize,"MB"),duration:1e3}),!n},s=function(e,t){return!0},l=function(e,t){e.status="uploading",e.message="上传中...";var n=new FormData;n.append("ft",""),n.append("file",e.file),(a?u["f"]:u["e"])(n).then((function(t){0===t.code&&(e.status="done",e.message="上传成功",e.id=a?t.msg:t.data)})).catch((function(){e.status="failed",e.message="上传失败"}))},d=function(e,t){},b=function(){};return{fileList:n,onDelete:d,isOverSize:i,beforeRead:s,afterRead:l,fileDownLoad:b}}};n("1dd3");d.render=c,d.__scopeId="data-v-d08a5ff4";t["a"]=d}}]);