(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29d5ce02"],{"5ffc2":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return c}));var n=a("b775"),r=a("fd23");function o(e){return Object(n["b"])({url:"/tsg/yhmd/openPcInfo",method:"get",params:e,headers:{applicationId:r["a"].tsg}})}function d(e){return Object(n["b"])({url:"/tsg/yhmd/".concat(e),method:"get",headers:{applicationId:r["a"].tsg}})}function c(e){return Object(n["b"])({url:"/tsg/yhmd",method:e.id?"put":"post",data:e,loadingLoader:"yhmdSave",headers:{applicationId:r["a"].tsg}})}},7073:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return s}));var n=a("b775"),r=a("fd23");function o(e){return Object(n["b"])({url:"/tsg/yhmd/kyqj/list",method:"get",params:e,headers:{applicationId:r["a"].tsgYhqj}})}function d(e){return Object(n["b"])({url:"/tsg/yhmd/kyqj/".concat(e),method:"get",loadingLoader:"yhqjmdInfo",headers:{applicationId:r["a"].tsgYhqj}})}function c(e,t){return Object(n["b"])({url:"/tsg/yhmd/kyqj",method:e.id?"put":"post",data:e,loadingLoader:"yhqjmdSave",loadingTips:t,headers:{applicationId:r["a"].tsgYhqj}})}function s(){return Object(n["b"])({url:"/tsg/yhmd/kyqj/getMyyhmd",method:"get",loadingLoader:"getMyyhmd"})}},"96db":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r=Object(n["withScopeId"])("data-v-b8c69900");Object(n["pushScopeId"])("data-v-b8c69900");var o=Object(n["createVNode"])("span",{style:{color:"red"}},"疾病证明或特殊文件或特殊事由签批报告",-1);Object(n["popScopeId"])();var d=r((function(e,t,a,d,c,s){var l=Object(n["resolveComponent"])("van-cell"),i=Object(n["resolveComponent"])("van-cell-group"),u=Object(n["resolveComponent"])("s-picker"),j=Object(n["resolveComponent"])("s-datetime-picker"),b=Object(n["resolveComponent"])("van-field"),m=Object(n["resolveComponent"])("s-uploader"),f=Object(n["resolveComponent"])("van-form"),p=Object(n["resolveComponent"])("ApprovalCommon");return Object(n["openBlock"])(),Object(n["createBlock"])(p,Object(n["mergeProps"])(d.state,{"type-name":"图书馆考研请假申请",applyInfo:d.state.applyInfo,"before-submit-validate":d.onValidate,onSubmit:d.onSubmit,class:"pd-0",style:{"padding-bottom":"0px"}}),{default:r((function(){return[Object(n["createVNode"])(i,{inset:""},{default:r((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(l,{title:"审核状态"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.mdl.taskName),1)]})),_:1},512),[[n["vShow"],d.state.mdl.taskName]]),Object(n["withDirectives"])(Object(n["createVNode"])(l,{title:"申请编号"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.mdl.sqbh),1)]})),_:1},512),[[n["vShow"],d.state.mdl.sqbh]]),Object(n["withDirectives"])(Object(n["createVNode"])(l,{title:"申请时间"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.mdl.createTime),1)]})),_:1},512),[[n["vShow"],d.state.mdl.createTime]]),Object(n["createVNode"])(l,{title:"本次摇号批次"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.batchInfo.pcbt||d.state.mdl.pcbt),1)]})),_:1}),Object(n["createVNode"])(l,{title:"摇号座位使用日期"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.batchInfo.zwkssyrq||d.state.mdl.zwkssyrq)+"~"+Object(n["toDisplayString"])(d.state.batchInfo.zwjssyrq||d.state.mdl.zwjssyrq),1)]})),_:1})]})),_:1}),Object(n["createVNode"])(i,{title:"基本信息",inset:""},{default:r((function(){return[Object(n["createVNode"])(l,{title:"姓名"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.xm),1)]})),_:1}),Object(n["createVNode"])(l,{title:"学号"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.xh),1)]})),_:1}),Object(n["createVNode"])(l,{title:"年级"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.nj),1)]})),_:1}),Object(n["createVNode"])(l,{title:"校区"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.ssxq),1)]})),_:1}),Object(n["createVNode"])(l,{title:"学院"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.ssxy),1)]})),_:1}),Object(n["createVNode"])(l,{title:"专业"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.zymc),1)]})),_:1}),Object(n["createVNode"])(l,{title:"班级"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.bjmc),1)]})),_:1}),Object(n["createVNode"])(l,{title:"联系电话"},{default:r((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(d.state.applyInfo.lxfs),1)]})),_:1})]})),_:1}),Object(n["createVNode"])(f,{ref:function(e){return d.state.form=e},disabled:d.state.disabled},{default:r((function(){return[Object(n["createVNode"])(i,{title:"摇号申请原因",inset:""},{default:r((function(){return[Object(n["createVNode"])(u,{name:"qjlx",label:"请假类型",modelValue:d.state.qjlx,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.state.qjlx=e}),columns:["事假","病假"],rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),Object(n["createVNode"])(j,{name:"qjksrq",label:"开始时间",type:"date",modelValue:d.state.qjksrq,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.state.qjksrq=e}),"value-format":d.valueFormat,"min-date":d.startDateRange.minDate,"max-date":d.startDateRange.maxDate,rules:[{required:!0,message:"请选择"},d.validator.startRule]},null,8,["modelValue","value-format","min-date","max-date","rules"]),Object(n["createVNode"])(j,{name:"qjjsrq",label:"结束时间",type:"date",modelValue:d.state.qjjsrq,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d.state.qjjsrq=e}),"value-format":d.valueFormat,"min-date":d.endDateRange.minDate,"max-date":d.endDateRange.maxDate,rules:[{required:!0,message:"请选择"},d.validator.endRule]},null,8,["modelValue","value-format","min-date","max-date","rules"]),Object(n["createVNode"])(b,{name:"qjyy",label:"请假原因",maxlength:200,autosize:"",rows:1,type:"textarea","show-word-limit":"",modelValue:d.state.qjyy,"onUpdate:modelValue":t[4]||(t[4]=function(e){return d.state.qjyy=e}),placeholder:"请输入",required:"",rules:[{required:!0,message:"请输入"}]},null,8,["modelValue"]),Object(n["createVNode"])(b,{name:"qx",label:"去向",maxlength:100,"show-word-limit":"",autosize:"",rows:1,type:"textarea",modelValue:d.state.qx,"onUpdate:modelValue":t[5]||(t[5]=function(e){return d.state.qx=e}),placeholder:"请输入",required:"",rules:[{required:!0,message:"请输入"}]},null,8,["modelValue"]),Object(n["createVNode"])(b,{name:"uploader",label:"文件上传"},{input:r((function(){return[Object(n["createVNode"])(m,{modelValue:d.state.fj,"onUpdate:modelValue":t[6]||(t[6]=function(e){return d.state.fj=e}),disabled:d.state.disabled},null,8,["modelValue","disabled"]),o]})),_:1})]})),_:1})]})),_:1},8,["disabled"])]})),_:1},16,["applyInfo","before-submit-validate","onSubmit"])})),c=(a("9a83"),a("f564")),s=a("f3f3"),l=(a("e7e5"),a("d399")),i=(a("d82d"),a("7278")),u=(a("b0c0"),a("450a")),j=a("3631"),b=a("f602"),m=a("135f"),f=a("bade"),p=a("7073"),q=a("5ffc2"),y=a("ca00"),O=a("6c02"),x=a("9670b"),h=a("5a0c"),v=a.n(h),g=a("c405"),V=a("4a89"),N={name:"Yhqj",components:{StudentInfoCell:V["a"],SDatetimePicker:x["a"],ApprovalCommon:m["a"],SUploader:b["a"],SPicker:j["a"],vanPopover:i["a"]},setup:function(){var e="YYYY-MM-DD",t=v()().add(2,"day").toDate(),a=v()().add(10,"year").toDate(),r=(new Date,Object(n["reactive"])({minDate:t,maxDate:a})),o=Object(n["reactive"])({minDate:t,maxDate:a}),d=Object(n["reactive"])({authority:{canEdit:!0},qjksrq:void 0,qjjsrq:void 0,qjlx:"",qjlxdm:void 0,qjts:void 0,qjyy:"",qx:"",fj:"",applyInfo:{},batchInfo:{},mdl:{},approvalRef:void 0,form:void 0,disabled:!1}),i=Object(f["b"])("xgsq:qjsq:cancelleave"),j=Object(n["ref"])(!1),b=Object(n["ref"])(null),m=Object(n["ref"])(null),x=(Object(f["c"])(["xg_xs"]),Object(O["d"])()),h=Object(u["a"])(d),V=(h.resetFields,h.setFieldValue,Object(n["toRefs"])(d)),N=V.qjksrq,D=V.qjjsrq,I=Object(g["a"])(N,D),k=Object(O["c"])(),S=k.query;S.id?Object(p["b"])(S.id).then((function(e){if(0===e.code){var t;Object.assign(d,Object(y["i"])(e.data)),N.value=e.data.qjksrq,D.value=e.data.qjjsrq;var a=e.data,n=a.id,r=a.yhmdId,o=a.xm,c=a.xh,s=a.nj,l=a.ssxy,i=a.ssxydm,u=a.ssxqdm,j=a.ssxq,b=a.zymc,m=a.zyxjdm,f=a.zygjbzdm,p=a.bjmc,q=a.bjdm,O=a.sjh,x=a.xb;d.applyInfo={id:n,yhmdId:r,xm:o,xh:c,ssxq:j,ssxqdm:u,nj:s,ssxy:l,ssxydm:i,zymc:b,zyxjdm:m,zygjbzdm:f,bjmc:p,bjdm:q,lxfs:O,xb:x},d.mdl=e.data,d.disabled=!(null!==(t=e.data.authority)&&void 0!==t&&t.canEdit)}})):Object(p["a"])().then((function(e){var t=e.data,a=t.id,n=t.xm,r=t.xh,o=t.nj,c=t.ssxy,s=t.ssxydm,l=t.ssxqdm,i=t.ssxq,u=t.zymc,j=t.zyxjdm,b=t.zygjbzdm,m=t.bjmc,f=t.bjdm,p=t.sjh,y=t.xb;d.applyInfo={yhmdId:a,xm:n,xh:r,ssxq:i,ssxqdm:l,nj:o,ssxy:c,ssxydm:s,zymc:u,zyxjdm:j,zygjbzdm:b,bjmc:m,bjdm:f,lxfs:p,xb:y},d.authority={canEdit:!0},Object(q["a"])({ssxq:l}).then((function(e){d.batchInfo=e.data||{},d.disabled=!e.data}))})),Object(n["watch"])((function(){return d.qjlx}),(function(e){d.qjlxdm="事假"===e?1:2})),Object(n["watchEffect"])((function(){d.qjksrq&&d.qjjsrq&&v()(d.qjksrq).isSameOrBefore(d.qjjsrq)&&(d.qjts=v()(d.qjjsrq).diff(d.qjksrq,"day")+1)}));var w=function(e,t){if(1===t&&v()(d.qjksrq).isBefore(v()().format("YYYY-MM-DD")))l["a"].fail("已经超过请假开始时间");else if(d.fj||9!==t){var a=Object(s["a"])({pcbh:d.batchInfo.pcbh,pcbt:d.batchInfo.pcbt,qjlx:d.qjlx,qjlxdm:d.qjlxdm,qjyy:d.qjyy,qx:d.qx,fj:d.fj,qjksrq:d.qjksrq,qjjsrq:d.qjjsrq,qjts:d.qjts,processParam:e.processParam},d.applyInfo);Object(p["d"])(Object(s["a"])({},a),"提交中").then((function(e){0===e.code&&(Object(c["a"])({type:"success",message:"提交成功",duration:1e3}),x.back())}))}else l["a"].fail("请上传附件")},z=function(){var e;return null===(e=d.form)||void 0===e?void 0:e.validate().catch((function(e){throw d.form.scrollToField(e[0].name),e}))};return{validator:I,state:d,valueFormat:e,formRef:b,disabled:j,studentInfo:m,onSubmit:w,onValidate:z,startDateRange:r,endDateRange:o,cancelLeaveEnable:i}}};N.render=d,N.__scopeId="data-v-b8c69900";t["default"]=N},fd23:function(e,t,a){"use strict";t["a"]={tsg:33,ky:122,jw:121,tsgYhqj:289}}}]);