(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-750a62fd"],{"1dd3":function(e,t,n){"use strict";n("d32f")},"1f2e":function(e,t,n){},9223:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),o=Object(a["withScopeId"])("data-v-86d783e0");Object(a["pushScopeId"])("data-v-86d783e0");var c=Object(a["createTextVNode"])("阶段性成果");Object(a["popScopeId"])();var d=o((function(e,t,n,d,l,r){var u=Object(a["resolveComponent"])("van-cell"),i=Object(a["resolveComponent"])("s-uploader"),f=Object(a["resolveComponent"])("van-cell-group"),m=Object(a["resolveComponent"])("van-divider"),s=Object(a["resolveComponent"])("ApprovalCommon");return Object(a["openBlock"])(),Object(a["createBlock"])(s,Object(a["mergeProps"])(l.mdl,{chooseParams:l.state,"type-name":"纵向项目结题",onSubmit:r.onSubmit,btnLoading:e.$wait.is(""),applyInfo:l.mdl}),{default:o((function(){return[Object(a["createVNode"])(f,null,{default:o((function(){return[Object(a["createVNode"])(u,{title:"项目名称",value:l.mdl.xmmc},null,8,["value"]),Object(a["createVNode"])(u,{title:"项目编号(内部)",value:l.mdl.xmbh},null,8,["value"]),Object(a["createVNode"])(u,{title:"负责人",value:l.mdl.fzr},null,8,["value"]),Object(a["createVNode"])(u,{title:"项目来源",value:l.mdl.xmly},null,8,["value"]),Object(a["createVNode"])(u,{title:"截止日期",value:l.mdl.jzrq},null,8,["value"]),Object(a["createVNode"])(u,{title:"研究工作情况",value:l.mdl.yjgzqk},null,8,["value"]),Object(a["createVNode"])(u,{title:"附件"},{"right-icon":o((function(){return[Object(a["createVNode"])(i,{modelValue:l.mdl.fj,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.mdl.fj=e}),disabled:!0},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(a["createVNode"])(m,{"content-position":"left"},{default:o((function(){return[c]})),_:1}),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(l.mdl.jtcgList,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(f,{class:"itemWrap",inset:"",key:e.id},{default:o((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(l.columns,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:t.dataIndex,title:t.title,value:e[t.dataIndex]},null,8,["title","value"])})),128))]})),_:2},1024)})),128))]})),_:1},16,["chooseParams","onSubmit","btnLoading","applyInfo"])})),l=(n("9a83"),n("f564")),r=n("f3f3"),u=(n("2b28"),n("9ed2")),i=n("135f"),f=n("b775");n("989b");function m(e){return Object(f["b"])({url:"/ky/xmjt/"+e,method:"get",loadingLoader:"getXmjt"})}function s(e){return Object(f["b"])({url:"/ky/xmjt",method:e.id?"put":"post",data:e,loadingLoader:"saveXmjt"})}var p=n("f602"),b={name:"zxxmjt",components:{ApprovalCommon:i["a"],SUploader:p["a"],vanDivider:u["a"]},data:function(){return{mdl:{},state:{},columns:[{title:"成果名称",dataIndex:"cgmc"},{title:"成果类型",dataIndex:"cglx"},{title:"第一作者",dataIndex:"dyzz"},{title:"获得日期",dataIndex:"hdrq"}]}},created:function(){var e=this,t=this.$route.query;m(t.id).then((function(t){0===t.code&&(e.mdl=t.data,e.state.deptId=e.mdl.xmxx.deptId,e.state.deptNo=e.mdl.xmxx.ssyxdm)}))},methods:{onSubmit:function(e){var t=this;s(Object(r["a"])(Object(r["a"])({},this.mdl),e)).then((function(e){Object(l["a"])({type:"success",message:"操作成功",duration:1e3}),t.$router.back()}))}}};n("fa8f");b.render=d,b.__scopeId="data-v-86d783e0";t["default"]=b},d32f:function(e,t,n){},f602:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),o=Object(a["withScopeId"])("data-v-d08a5ff4"),c=o((function(e,t,n,c,d,l){var r=Object(a["resolveComponent"])("van-icon"),u=Object(a["resolveComponent"])("Uploader");return Object(a["openBlock"])(),Object(a["createBlock"])(u,{modelValue:c.fileList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.fileList=e}),"before-read":c.beforeRead,"after-read":c.afterRead,"max-size":c.isOverSize,"max-count":n.maxCount,accept:n.accept,"show-upload":!n.disabled,deletable:!n.disabled,name:n.name,onDelete:c.onDelete},{"preview-cover":o((function(e){return[Object(a["createVNode"])("div",{class:"mask-content",onClick:Object(a["withModifiers"])((function(t){return c.fileDownLoad(e)}),["stop"])},[Object(a["createVNode"])(r,{name:"down",class:"icon"})],8,["onClick"])]})),_:1},8,["modelValue","before-read","after-read","max-size","max-count","accept","show-upload","deletable","name","onDelete"])})),d=(n("9a83"),n("f564")),l=n("fc11"),r=(n("480b"),n("a37c")),u=(n("e930"),n("8f80")),i=(n("a9e3"),n("d81d"),n("ac1f"),n("1276"),n("4de4"),n("a15b"),n("2934")),f={name:"SUploader",components:Object(l["a"])({Uploader:u["a"]},r["a"].name,r["a"]),props:{modelValue:String,name:String,disabled:{type:Boolean,required:!1},type:{type:[String,void 0],validator:function(e){return void 0===e||-1!==["link"].indexOf(e)}},accept:{type:String,default:".rar,.zip,.doc,.docx,.pdf,.jpg,.png"},maxSize:{type:Number,default:50},maxCount:{type:Number,default:6}},setup:function(e,t){var n=Object(a["ref"])([]),o="link"===e.type,c=function(e){var t=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;return t.test(e)};Object(a["watch"])((function(){return e.modelValue}),(function(t,a){var d;o?n.value=null===(d=e.modelValue)||void 0===d?void 0:d.split(",").map((function(e){return{id:e,status:"done",url:e}})):!a&&t&&"-2"!==t?Object(i["h"])({ids:t}).then((function(e){0===e.code&&(n.value=e.data.map((function(e){return{id:e.id,name:e.fname,status:"done",url:c(e.furl)?e.furl:e.fname}})))})):t||(n.value=[])}),{immediate:!0}),Object(a["watch"])((function(){return n.value}),(function(e,n){var a=e.filter((function(e){return"uploading"!==e.status})).map((function(e){return e.id}));0===e.length?t.emit("update:modelValue",""):0===a.length?t.emit("update:modelValue","-2"):t.emit("update:modelValue",a.join(","))}),{deep:!0});var l=function(t){var n=t.size/1024/1024<e.maxSize;return n||Object(d["a"])({type:"warning",message:"上传的文件不能超过".concat(e.maxSize,"MB"),duration:1e3}),!n},r=function(e,t){return!0},u=function(e,t){e.status="uploading",e.message="上传中...";var n=new FormData;n.append("ft",""),n.append("file",e.file),(o?i["f"]:i["e"])(n).then((function(t){0===t.code&&(e.status="done",e.message="上传成功",e.id=o?t.msg:t.data)})).catch((function(){e.status="failed",e.message="上传失败"}))},f=function(e,t){},m=function(){};return{fileList:n,onDelete:f,isOverSize:l,beforeRead:r,afterRead:u,fileDownLoad:m}}};n("1dd3");f.render=c,f.__scopeId="data-v-d08a5ff4";t["a"]=f},fa8f:function(e,t,n){"use strict";n("1f2e")}}]);